image: python:slim
before_script:
  - apt-get update
  - apt-get install -y git cmake build-essential libopenal-dev
  - git clone https://github.com/kcat/alure
  - cmake -DCMAKE_INSTALL_PREFIX:PATH=/usr -S alure -B alure/build
  - cmake --build alure/build --parallel `nproc` --target install
  - rm -fr alure
pages:
  stage: deploy
  script:
    - python -m pip install Sphinx pydata-sphinx-theme .
    - sphinx-build -bhtml docs/source public
  artifacts:
    paths:
      - public
  only:
    - main
