(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[21],{1919:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"g",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return l}));var r=n(3),a=n(7),o=Object(r.a)("div",{target:"e1fmhx4f0",label:"ChartControls"})("display:flex;justify-content:space-between;padding:",Object(a.a)(1)," ",Object(a.a)(3),";border-top:1px solid ",(function(e){return e.theme.border}),";"),i=Object(r.a)("h4",{target:"e1fmhx4f2",label:"SectionHeading"})("display:inline-grid;grid-auto-flow:column;grid-gap:",Object(a.a)(1),";align-items:center;color:",(function(e){return e.theme.subText}),";font-size:",(function(e){return e.theme.fontSizeMedium}),";margin:",Object(a.a)(1)," 0;line-height:1.3;"),s=Object(r.a)("span",{target:"e1fmhx4f3",label:"SectionValue"})("color:",(function(e){return e.theme.subText}),";font-size:",(function(e){return e.theme.fontSizeMedium}),";margin-right:",Object(a.a)(1),";"),c=Object(r.a)("div",{target:"e1fmhx4f4",label:"InlineContainer"})("display:flex;align-items:center;margin-right:",Object(a.a)(2),";> h4{margin-right:",Object(a.a)(1),";}&:last-child{margin-right:0;}"),d=Object(r.a)("div",{target:"e1fmhx4f5",label:"HeaderTitle"})("display:inline-grid;grid-auto-flow:column;grid-gap:",Object(a.a)(1),";font-size:",(function(e){return e.theme.fontSizeLarge}),";color:",(function(e){return e.theme.textColor}),";align-items:center;"),u=Object(r.a)(d,{target:"e1fmhx4f6",label:"HeaderTitleLegend"})("background-color:",(function(e){return e.theme.background}),";border-bottom-right-radius:",(function(e){return e.theme.borderRadius}),";position:absolute;z-index:1;"),l=Object(r.a)("div",{target:"e1fmhx4f7",label:"ChartContainer"})("padding:",Object(a.a)(2)," ",Object(a.a)(3),";")},1923:function(e,t,n){"use strict";n(1);var r=n(264),a=n.n(r),o=n(0),i=function(e){var t="".concat(e.title," - ").concat(e.objSlug," - Sentry");return Object(o.f)(a.a,{title:t},e.children)};i.displayName="SentryDocumentTitle",t.a=i},2280:function(e,t,n){"use strict";var r=n(5),a=n.n(r),o=n(9),i=n.n(o),s=n(10),c=n.n(s),d=n(11),u=n.n(d),l=n(12),f=n.n(l),b=n(6),p=n.n(b),h=n(3),g=n(1),v=n.n(g),y=n(15),m=n(7),O=n(53),j=n(0);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var w=function(e){u()(n,e);var t=D(n);function n(){var e;i()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={isFocused:!1,isHovering:!1},e.refInput=v.a.createRef(),e.blur=function(){e.refInput.current&&e.refInput.current.blur()},e.focus=function(){e.refInput.current&&(e.refInput.current.focus(),document.execCommand("selectAll",!1,void 0))},e.onBlur=function(t){e.setState({isFocused:!1,isHovering:!1}),Object(O.a)(e.props.onBlur,n.setValueOnEvent(t))},e.onFocus=function(t){e.setState({isFocused:!0}),Object(O.a)(e.props.onFocus,n.setValueOnEvent(t)),window.setTimeout((function(){return document.execCommand("selectAll",!1,void 0)}),1)},e.onChangeUsingOnInput=function(t){Object(O.a)(e.props.onChange,n.setValueOnEvent(t))},e.onKeyDown=function(t){"Enter"===t.key&&(t.preventDefault(),e.refInput.current&&e.refInput.current.blur()),Object(O.a)(e.props.onKeyUp,n.setValueOnEvent(t))},e.onKeyUp=function(t){"Escape"===t.key&&e.refInput.current&&e.refInput.current.blur(),Object(O.a)(e.props.onKeyUp,n.setValueOnEvent(t))},e.onMouseEnter=function(){e.setState({isHovering:!e.props.disabled})},e.onMouseMove=function(){e.setState({isHovering:!e.props.disabled})},e.onMouseLeave=function(){e.setState({isHovering:!1})},e.onClickIcon=function(t){e.props.disabled||(e.refInput.current&&(e.refInput.current.focus(),document.execCommand("selectAll",!1,void 0)),Object(O.a)(e.props.onClick,n.setValueOnEvent(t)))},e}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.placeholder,r=e.disabled,o=this.state.isFocused,i=t||n||"";return Object(j.f)(S,{style:this.props.style,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave},Object(j.f)(C,a()({},this.props,{ref:this.refInput,suppressContentEditableWarning:!0,contentEditable:!this.props.disabled,isHovering:this.state.isHovering,isDisabled:this.props.disabled,onBlur:this.onBlur,onFocus:this.onFocus,onInput:this.onChangeUsingOnInput,onChange:this.onChangeUsingOnInput,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp}),i),!o&&!r&&Object(j.f)("div",{onClick:this.onClickIcon},Object(j.f)(z,null)))}}],[{key:"setValueOnEvent",value:function(e){var t=e.target.innerText||e.currentTarget.innerText;return e.target.value=t,e.currentTarget.value=t,e}}]),n}(v.a.Component);w.displayName="InputInline";var S=Object(h.a)("div",{target:"e9oz5gz0",label:"Wrapper"})({name:"1684o59",styles:"display:inline-flex;align-items:center;vertical-align:text-bottom;"}),C=Object(h.a)("div",{target:"e9oz5gz1",label:"Input"})("min-width:40px;margin:0;border:1px solid ",(function(e){return e.isHovering?e.theme.border:"transparent"}),";outline:none;line-height:inherit;border-radius:",Object(m.a)(.5),";background:transparent;padding:1px;&:focus,&:active{border:1px solid ",(function(e){return e.isDisabled?"transparent":e.theme.border}),";background-color:",(function(e){return e.isDisabled?"transparent":e.theme.gray200}),";}"),z=Object(h.a)(y.u,{target:"e9oz5gz2",label:"StyledIconEdit"})("color:",(function(e){return e.theme.gray300}),";margin-left:",Object(m.a)(.5),";&:hover{cursor:pointer;}");t.a=w},2773:function(e,t,n){"use strict";n.r(t);var r=n(8),a=n.n(r),o=n(9),i=n.n(o),s=n(10),c=n.n(s),d=n(11),u=n.n(d),l=n(12),f=n.n(l),b=n(6),p=n.n(b),h=n(3),g=n(1),v=n.n(g),y=n(22),m=n(60),O=n.n(m),j=n(2372),D=n(34),w=n(729),S=n(42),C=n(713),z=n(2),x=n(7),k=n(37),E=n(46),I=n(57),R=n(26),P=n(75),W=n(138),U=n(117),A=n(15),H=n(0);function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var M=function(e){u()(n,e);var t=T(n);function n(){return i()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.dashboardState,r=t.dashboards,a=t.dashboard,o=t.onEdit,i=t.onCreate,s=t.onCancel,c=t.onCommit,d=t.onDelete,u=t.canEdit,l=Object(H.f)(R.b,{"data-test-id":"dashboard-cancel",onClick:function(e){e.preventDefault(),s()}},Object(z.b)("Cancel"));if(["edit","pending_delete"].includes(n))return Object(H.f)(P.a,{gap:1,key:"edit-controls"},l,Object(H.f)(W.a,{priority:"danger",message:Object(z.b)("Are you sure you want to delete this dashboard?"),onConfirm:d},Object(H.f)(R.b,{"data-test-id":"dashboard-delete",priority:"danger"},Object(z.b)("Delete"))),Object(H.f)(R.b,{"data-test-id":"dashboard-commit",onClick:function(e){e.preventDefault(),c()},priority:"primary"},Object(z.b)("Save and Finish")));if("create"===n)return Object(H.f)(P.a,{gap:1,key:"create-controls"},l,Object(H.f)(R.b,{"data-test-id":"dashboard-commit",onClick:function(e){e.preventDefault(),c()},priority:"primary"},Object(z.b)("Save and Finish")));var f=r.map((function(e){return{label:e.title,value:e}})),b=void 0;return a?b={label:a.title,value:a}:f.length&&(b=f[0]),Object(H.f)(K,{gap:1,key:"controls"},Object(H.f)(N,null,Object(H.f)(U.a,{key:"select",name:"parameter",placeholder:Object(z.b)("Select Dashboard"),options:f,value:b,onChange:function(t){var n=t.value,r=e.props.organization;y.browserHistory.push({pathname:"/organizations/".concat(r.slug,"/dashboards/").concat(n.id,"/"),query:{}})}})),Object(H.f)(R.b,{"data-test-id":"dashboard-create",onClick:function(e){e.preventDefault(),i()},icon:Object(H.f)(A.b,{size:"xs",isCircled:!0}),disabled:!u,title:u?void 0:Object(z.b)("Requires dashboard editing")},Object(z.b)("Create Dashboard")),Object(H.f)(R.b,{"data-test-id":"dashboard-edit",onClick:function(e){e.preventDefault(),o()},priority:"primary",icon:Object(H.f)(A.u,{size:"xs"}),disabled:!u,title:u?void 0:Object(z.b)("Requires dashboard editing")},Object(z.b)("Edit Dashboard")))}}]),n}(v.a.Component);M.displayName="Controls";var N=Object(h.a)("div",{target:"e104d2ty0",label:"DashboardSelect"})("min-width:200px;font-size:",(function(e){return e.theme.fontSizeMedium}),";"),K=Object(h.a)(P.a,{target:"e104d2ty1",label:"StyledButtonBar"})("flex-shrink:0;@media (max-width:",(function(e){return e.theme.breakpoints[0]}),"){grid-auto-flow:row;grid-row-gap:",Object(x.a)(1),";width:100%;}"),_=M,q=n(24),Y=n.n(q),F=n(748),L=n.n(F),X=n(2307),B=n(2138),V=n(64),J=n(574),G=n(324),Q=n(114),Z=Object(h.a)(Q.b.div,{target:"e9u4e0g0",label:"WidgetWrapper"})("position:relative;min-width:200px;touch-action:manipulation;",(function(e){switch(e.displayType){case"big_number":return"grid-area: span 1 / span 1;";default:return"grid-area: span 2 / span 2;"}}),";"),$={x:0,y:0,scaleX:1,scaleY:1};function ee(e){var t=e.onClick,n=Object(B.d)({disabled:!0,id:"add-widget-button",transition:null}),r=n.setNodeRef,a=n.transform;return Object(H.f)(Z,{key:"add",ref:r,displayType:"big_number",layoutId:"add-widget-button",style:{originX:0,originY:0},animate:a?{x:a.x,y:a.y,scaleX:null!=a&&a.scaleX&&a.scaleX<=1?a.scaleX:1,scaleY:null!=a&&a.scaleY&&a.scaleY<=1?a.scaleY:1}:$,transition:{duration:.25}},Object(H.f)(te,{key:"add","data-test-id":"widget-add",onClick:t},Object(H.f)(A.b,{size:"lg",isCircled:!0,color:"inactive"})))}ee.displayName="AddWidget";var te=Object(h.a)("a",{target:"e1wks03l0",label:"AddWidgetWrapper"})("width:100%;height:110px;border:2px dashed ",(function(e){return e.theme.border}),";border-radius:",(function(e){return e.theme.borderRadius}),";display:flex;align-items:center;justify-content:center;"),ne=ee,re=n(33),ae=n(2430),oe={x:0,y:0,scaleX:1,scaleY:1,zIndex:0};function ie(e){var t=e.widget,n=e.dragId,r=e.isEditing,a=e.onDelete,o=e.onEdit,i=Object(B.d)({id:n,transition:null}),s=i.attributes,c=i.listeners,d=i.setNodeRef,u=i.transform,l=i.isDragging,f=i.isSorting;return Object(g.useEffect)((function(){if(l)return document.body.style.cursor="grabbing",function(){document.body.style.cursor=""}}),[l]),Object(H.f)(Z,{ref:d,displayType:t.displayType,layoutId:n,style:{originX:0,originY:0,boxShadow:l?re.b.dropShadowHeavy:"none",borderRadius:l?re.b.borderRadius:void 0},animate:u?{x:u.x,y:u.y,scaleX:null!=u&&u.scaleX&&u.scaleX<=1?u.scaleX:1,scaleY:null!=u&&u.scaleY&&u.scaleY<=1?u.scaleY:1,zIndex:l?re.b.zIndex.modal:0}:oe,transition:{duration:l?0:.25,easings:{type:"spring"}}},Object(H.f)(ae.a,{widget:t,isEditing:r,onDelete:a,onEdit:o,isSorting:f,hideToolbar:f,currentWidgetDragging:l,draggableProps:{attributes:s,listeners:c}}))}ie.displayName="SortableWidget";var se=ie;function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var de=function(e){u()(n,e);var t=ce(n);function n(){var e;i()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleStartAdd=function(){var t=e.props,n=t.organization,r=t.dashboard,a=t.selection;Object(V.b)({organization:n,dashboard:r,selection:a,onAddWidget:e.handleAddComplete})},e.handleAddComplete=function(t){e.props.onUpdate([].concat(Y()(e.props.dashboard.widgets),[t]))},e.handleUpdateComplete=function(t){return function(n){var r=Y()(e.props.dashboard.widgets);r[t]=n,e.props.onUpdate(r)}},e.handleDeleteWidget=function(t){return function(){var n=Y()(e.props.dashboard.widgets);n.splice(t,1),e.props.onUpdate(n)}},e.handleEditWidget=function(t,n){return function(){var r=e.props,a=r.organization,o=r.dashboard,i=r.selection;Object(V.b)({organization:a,dashboard:o,widget:t,selection:i,onAddWidget:e.handleAddComplete,onUpdateWidget:e.handleUpdateComplete(n)})}},e}return c()(n,[{key:"componentDidMount",value:function(){this.props.isEditing&&this.fetchTags()}},{key:"componentDidUpdate",value:function(e){var t=this.props.isEditing;e.isEditing!==t&&t&&this.fetchTags()}},{key:"fetchTags",value:function(){var e=this.props,t=e.api,n=e.organization,r=e.selection;Object(J.c)(t,n.slug,r)}},{key:"getWidgetIds",value:function(){return[].concat(Y()(this.props.dashboard.widgets.map((function(e,t){return fe(e,t)}))),["add-widget-button"])}},{key:"renderWidget",value:function(e,t){var n=this.props.isEditing,r=fe(e,t),a=r;return Object(H.f)(L.a,{key:r,once:!0,height:240,offset:100},Object(H.f)(se,{widget:e,dragId:a,isEditing:n,onDelete:this.handleDeleteWidget(t),onEdit:this.handleEditWidget(e,t)}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.isEditing,r=t.onUpdate,a=t.dashboard.widgets,o=this.getWidgetIds();return Object(H.f)(X.a,{onDragEnd:function(e){var t=e.over,n=e.active.id,i=o.indexOf.bind(o),s=n?i(n):-1;if(t&&"add-widget-button"!==t.id){var c=i(t.id);s!==c&&r(Object(B.b)(a,s,c))}}},Object(H.f)(le,null,Object(H.f)(B.a,{items:o,strategy:B.c},a.map((function(t,n){return e.renderWidget(t,n)})),n&&Object(H.f)(ne,{onClick:this.handleStartAdd}))))}}]),n}(v.a.Component);de.displayName="Dashboard";var ue=Object(E.a)(Object(G.a)(de)),le=Object(h.a)("div",{target:"e1nz851n0",label:"WidgetContainer"})("display:grid;grid-template-columns:repeat(4,1fr);grid-auto-flow:row dense;grid-gap:",Object(x.a)(2),";@media (max-width:",(function(e){return e.theme.breakpoints[1]}),"){grid-template-columns:1fr;}");function fe(e,t){var n;return null!==(n=e.id)&&void 0!==n?n:"index-".concat(t)}var be=n(2373),pe=n(180),he=n.n(pe),ge=n(704),ve=n(715),ye=n(1923),me=n(220);function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function De(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var we=function(e){u()(n,e);var t=De(n);function n(){var e;i()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!0,reloading:!1,error:!1,errors:[],dashboards:[],selectedDashboard:null},e}return c()(n,[{key:"componentDidUpdate",value:function(e){O()(e.params,this.props.params)||this.remountComponent()}},{key:"getEndpoints",value:function(){var e=this.props,t=e.organization,n=e.params,r="/organizations/".concat(t.slug,"/dashboards/"),a=[["dashboards",r]];return n.dashboardId&&(a.push(["selectedDashboard","".concat(r).concat(n.dashboardId,"/")]),Object(k.d)({eventKey:"dashboards2.view",eventName:"Dashboards2: View dashboard",organization_id:parseInt(this.props.organization.id,10),dashboard_id:n.dashboardId})),a}},{key:"getDashboards",value:function(){var e=this.state.dashboards;return Array.isArray(e)?e:[]}},{key:"onRequestSuccess",value:function(e){var t=e.stateKey,n=e.data,r=this.props,a=r.params,o=r.organization,i=r.location;if(!a.dashboardId&&"selectedDashboard"!==t){var s=n.length?n[0].id:"default-overview",c="/organizations/".concat(o.slug,"/dashboards/").concat(s,"/");y.browserHistory.replace({pathname:c,query:je({},i.query)})}}},{key:"renderBody",value:function(){var e=this.props,t=e.organization,n=e.children,r=this.state,a=r.selectedDashboard,o=r.error;return Object(H.f)(me.b,null,Object(H.f)(ve.a,{organization:t},n({error:o,dashboard:a,dashboards:this.getDashboards(),reloadData:this.reloadData.bind(this)})))}},{key:"renderError",value:function(e){return Object.values(this.state.errors).find((function(e){return e&&404===e.status}))?Object(H.f)(w.a,null):he()(p()(n.prototype),"renderError",this).call(this,e,!0,!0)}},{key:"renderComponent",value:function(){var e=this.props,t=e.organization,r=e.location;return t.features.includes("dashboards-basic")?Object(H.f)(ye.a,{title:Object(z.b)("Dashboards"),objSlug:t.slug},he()(p()(n.prototype),"renderComponent",this).call(this)):(y.browserHistory.replace({pathname:"/organizations/".concat(t.slug,"/dashboards/"),query:je({},r.query)}),null)}}]),n}(ge.a),Se=n(5),Ce=n.n(Se),ze=n(2280);function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var Ie=function(e){u()(n,e);var t=Ee(n);function n(){var e;i()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).refInput=v.a.createRef(),e.onBlur=function(t){var n=(t.target.value||"").trim().slice(0,255).trim();if(!n)return Object(D.a)(Object(z.b)("Please set the title for this dashboard")),void(e.refInput.current&&e.refInput.current.focus());var r=e.props,a=r.dashboard,o=r.onUpdate;a&&(t.target.innerText=n,o(ke(ke({},a),{},{title:n})))},e}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.dashboard,n=e.isEditing;return t?n?Object(H.f)(Re,null,Object(H.f)(Pe,{name:"dashboard-title",ref:this.refInput,value:t.title,onBlur:this.onBlur})):Object(H.f)(Re,null,t.title):Object(H.f)(Re,null,Object(z.b)("Dashboards"))}}]),n}(v.a.Component);Ie.displayName="DashboardTitle";var Re=Object(h.a)("div",{target:"e14jh2hu0",label:"Container"})("margin-right:",Object(x.a)(1),";@media (max-width:",(function(e){return e.theme.breakpoints[2]}),"){margin-bottom:",Object(x.a)(2),";}"),Pe=Object(h.a)(v.a.forwardRef((function(e,t){return Object(H.f)(ze.a,Ce()({},e,{ref:t}))})),{target:"e14jh2hu1",label:"StyledInlineInput"})({name:"1370mw6",styles:"overflow-wrap:anywhere;white-space:normal;"}),We=Ie,Ue=n(751),Ae=n.n(Ue);function He(e){return Ae()(e)}function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var Ke=Object(z.b)("You have unsaved changes are you sure you want to leave?"),_e=function(e){u()(n,e);var t=Ne(n);function n(){var e;i()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={dashboardState:"view",modifiedDashboard:null},e.onEdit=function(t){return function(){t&&(Object(k.d)({eventKey:"dashboards2.edit.start",eventName:"Dashboards2: Edit start",organization_id:parseInt(e.props.organization.id,10)}),e.setState({dashboardState:"edit",modifiedDashboard:He(t)}))}},e.onRouteLeave=function(){if(!["view","pending_delete"].includes(e.state.dashboardState))return Ke},e.onUnload=function(t){["view","pending_delete"].includes(e.state.dashboardState)||(t.preventDefault(),t.returnValue=Ke)},e.onCreate=function(){Object(k.d)({eventKey:"dashboards2.create.start",eventName:"Dashboards2: Create start",organization_id:parseInt(e.props.organization.id,10)}),e.setState({dashboardState:"create",modifiedDashboard:He(be.c)})},e.onCancel=function(){"create"===e.state.dashboardState?Object(k.d)({eventKey:"dashboards2.create.cancel",eventName:"Dashboards2: Create cancel",organization_id:parseInt(e.props.organization.id,10)}):"edit"===e.state.dashboardState&&Object(k.d)({eventKey:"dashboards2.edit.cancel",eventName:"Dashboards2: Edit cancel",organization_id:parseInt(e.props.organization.id,10)}),e.setState({dashboardState:"view",modifiedDashboard:null})},e.onDelete=function(t){return function(){var n=e.props,r=n.api,a=n.organization,o=n.location;if(null!=t&&t.id){var i=e.state.dashboardState;e.setState({dashboardState:"pending_delete"},(function(){Object(k.d)({eventKey:"dashboards2.delete",eventName:"Dashboards2: Delete",organization_id:parseInt(e.props.organization.id,10)}),Object(j.b)(r,a.slug,t.id).then((function(){Object(D.c)(Object(z.b)("Dashboard deleted")),y.browserHistory.replace({pathname:"/organizations/".concat(a.slug,"/dashboards/"),query:Me({},o.query)})})).catch((function(){e.setState({dashboardState:i})}))}))}}},e.onCommit=function(t){var n=t.dashboard,r=t.reloadData;return function(){var t=e.props,a=t.api,o=t.organization,i=t.location,s=e.state,c=s.dashboardState,d=s.modifiedDashboard;switch(c){case"create":d&&Object(j.a)(a,o.slug,d).then((function(t){Object(D.c)(Object(z.b)("Dashboard created")),Object(k.d)({eventKey:"dashboards2.create.complete",eventName:"Dashboards2: Create complete",organization_id:parseInt(o.id,10)}),e.setState({dashboardState:"view",modifiedDashboard:null}),y.browserHistory.replace({pathname:"/organizations/".concat(o.slug,"/dashboards/").concat(t.id,"/"),query:Me({},i.query)})}));break;case"edit":if(d)return O()(n,d)?void e.setState({dashboardState:"view",modifiedDashboard:null}):void Object(j.c)(a,o.slug,d).then((function(t){Object(D.c)(Object(z.b)("Dashboard updated")),Object(k.d)({eventKey:"dashboards2.edit.complete",eventName:"Dashboards2: Edit complete",organization_id:parseInt(o.id,10)}),e.setState({dashboardState:"view",modifiedDashboard:null}),n&&t.id!==n.id?y.browserHistory.replace({pathname:"/organizations/".concat(o.slug,"/dashboards/").concat(t.id,"/"),query:Me({},i.query)}):r()}));e.setState({dashboardState:"view",modifiedDashboard:null});break;case"view":default:e.setState({dashboardState:"view",modifiedDashboard:null})}}},e.onWidgetChange=function(t){var n=e.state.modifiedDashboard;null!==n&&e.setState((function(e){return Me(Me({},e),{},{modifiedDashboard:Me(Me({},n),{},{widgets:t})})}))},e.setModifiedDashboard=function(t){e.setState({modifiedDashboard:t})},e}return c()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.route;e.router.setRouteLeaveHook(t,this.onRouteLeave),window.addEventListener("beforeunload",this.onUnload)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.onUnload)}},{key:"render",value:function(){var e=this,t=this.props,n=t.api,r=t.location,a=t.params,o=t.organization,i=this.state,s=i.modifiedDashboard,c=i.dashboardState,d=["edit","create","pending_delete"].includes(c),u=o.features.includes("dashboards-edit");return Object(H.f)(C.a,{skipLoadLastUsed:o.features.includes("global-views"),defaultSelection:{datetime:{start:null,end:null,utc:!1,period:be.a}}},Object(H.f)(we,{api:n,location:r,params:a,organization:o},(function(t){var n=t.dashboard,r=t.dashboards,a=t.error,i=t.reloadData;return Object(H.f)(v.a.Fragment,null,Object(H.f)(qe,null,Object(H.f)(We,{dashboard:s||n,onUpdate:e.setModifiedDashboard,isEditing:d}),Object(H.f)(_,{organization:o,dashboards:r,dashboard:n,onEdit:e.onEdit(n),onCreate:e.onCreate,onCancel:e.onCancel,onCommit:e.onCommit({dashboard:n,reloadData:i}),onDelete:e.onDelete(n),dashboardState:c,canEdit:u})),a?Object(H.f)(w.a,null):n?Object(H.f)(ue,{dashboard:s||n,organization:o,isEditing:d,onUpdate:e.onWidgetChange}):Object(H.f)(S.default,null))})))}}]),n}(v.a.Component);_e.displayName="DashboardDetail";var qe=Object(h.a)("div",{target:"e39ap620",label:"StyledPageHeader"})("display:flex;align-items:center;justify-content:space-between;font-size:",(function(e){return e.theme.headerFontSize}),";color:",(function(e){return e.theme.textColor}),";height:40px;margin-bottom:",Object(x.a)(2),";@media (max-width:",(function(e){return e.theme.breakpoints[2]}),"){flex-direction:column;align-items:flex-start;height:auto;}");t.default=Object(E.a)(Object(I.a)(_e))}}]);
//# sourceMappingURL=DashboardDetail~OverviewDashboard.js.map