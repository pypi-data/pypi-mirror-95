(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[88],{1918:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var r=n(9),o=n.n(r),a=n(10),i=n.n(a),c=n(11),s=n.n(c),u=n(12),l=n.n(u),f=n(6),p=n.n(f),d=(n(1),n(264)),v=n.n(d),b=n(704),h=n(0);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var o=p()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var g=function(t){s()(n,t);var e=y(n);function n(){return o()(this,n),e.apply(this,arguments)}return i()(n,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var t=this.getTitle();return Object(h.f)(v.a,{title:"".concat(t?"".concat(t," - "):"","Sentry")},this.renderComponent())}}]),n}(b.a);g.displayName="AsyncView"},2913:function(t,e,n){"use strict";n.r(e),n.d(e,"Events",(function(){return gt})),n.d(e,"parseRowFromLinks",(function(){return ht}));var r=n(21),o=n.n(r),a=n(30),i=n.n(a),c=n(180),s=n.n(c),u=n(8),l=n.n(u),f=n(14),p=n.n(f),d=n(9),v=n.n(d),b=n(10),h=n.n(b),y=n(11),g=n.n(y),j=n(12),O=n.n(j),m=n(6),R=n.n(m),k=n(3),z=n(1),w=n.n(z),P=n(22),D=n(49),S=n(60),C=n.n(S),E=n(34),x=n(129),q=n(704),T=n(181),N=n(705),U=n(96),L=n(2),M=n(216),B=n(57),I=n(1918),A=n(5),H=n.n(A),J=n(2042),W=n(46),X=n(324),Z=n(0);function F(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var o=R()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O()(this,n)}}var K=Object(X.a)(Object(W.a)(function(t){g()(n,t);var e=F(n);function n(){return v()(this,n),e.apply(this,arguments)}return h()(n,[{key:"render",value:function(){var t=this.props,e=t.selection,n=p()(t,["selection"]),r=e.datetime,o=e.projects,a=e.environments;return Object(Z.f)(J.a,H()({},r,{projects:o||[],environments:a||[]},n))}}]),n}(w.a.Component))),V=n(434),G=n(323),Q=n(183),Y=n(42),$=n(240),_=n(44),tt=n(7),et=n(155);function nt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var o=R()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O()(this,n)}}var rt=function(t){g()(n,t);var e=nt(n);function n(){return v()(this,n),e.apply(this,arguments)}return h()(n,[{key:"render",value:function(){var t=this.props,e=t.events,n=t.organization,r=t.utc,o=t.projectsMap;return e.map((function(t,e){var a=o.get(t.projectID),i=t.title||t.message.split("\n")[0].substr(0,100),c=a?"/organizations/".concat(n.slug,"/projects/").concat(null==a?void 0:a.slug,"/events/").concat(t.eventID,"/"):"";return Object(Z.f)(ut,{key:"".concat(null==a?void 0:a.slug,"-").concat(t.eventID),first:0===e},Object(Z.f)(lt,null,Object(Z.f)(ft,null,a?Object(Z.f)(P.Link,{to:c},i):i)),Object(Z.f)(lt,null,t["event.type"]),Object(Z.f)(lt,null,a?Object(Z.f)(Q.a,{project:a,avatarSize:16,displayName:Object(Z.f)("span",null,null==a?void 0:a.slug),avatarProps:{consistentWidth:!0}}):Object(Z.f)($.a,{height:"16px",width:"50px"})),Object(Z.f)(lt,null,t&&t.user&&Object(Z.f)(Q.a,{user:t.user,hideEmail:!0,avatarSize:16})),Object(Z.f)(lt,null,Object(Z.f)(pt,{utc:r,date:new Date(t.dateCreated)})))}))}}]),n}(w.a.PureComponent);rt.displayName="EventsTableBody";var ot=function(t){g()(n,t);var e=nt(n);function n(){return v()(this,n),e.apply(this,arguments)}return h()(n,[{key:"shouldComponentUpdate",value:function(t){return this.props.reloading!==t.reloading||this.props.zoomChanged!==t.zoomChanged||this.props.loading!==t.loading||this.props.loadingProjects!==t.loadingProjects||(this.props.organization!==t.organization||this.props.events!==t.events)}},{key:"componentDidUpdate",value:function(t){this.props.onUpdateComplete&&t.zoomChanged&&this.props.reloading&&this.props.onUpdateComplete()}},{key:"render",value:function(){var t=this.props,e=t.events,n=t.organization,r=t.loading,o=t.reloading,a=t.zoomChanged,i=t.utc,c=e&&!!e.length;return Object(Z.f)(U.a,null,Object(Z.f)(U.e,null,Object(Z.f)(ct,null,Object(Z.f)("div",null,Object(L.b)("Event")),Object(Z.f)("div",null,Object(L.b)("Event Type")),Object(Z.f)("div",null,Object(L.b)("Project")),Object(Z.f)("div",null,Object(L.b)("User")),Object(Z.f)("div",null,Object(L.b)("Time")))),r&&Object(Z.f)(Y.default,null),!r&&!c&&Object(Z.f)(G.a,null,Object(Z.f)("p",null,Object(L.b)("No events"))),c&&Object(Z.f)(it,null,(o||a)&&Object(Z.f)(st,{overlay:!0}),Object(Z.f)(rt,{projectsMap:this.projectsMap,events:e,organization:n,utc:i})))}},{key:"projectsMap",get:function(){var t=this.props,e=t.organization,n=t.loadingProjects,r=t.projects,o=!n&&r||e.projects||[];return new Map(o.map((function(t){return[t.id,t]})))}}]),n}(w.a.Component);ot.displayName="EventsTable";var at=Object(et.a)(Object(P.withRouter)(ot)),it=Object(k.a)(U.c,{target:"e1n2302f0",label:"StyledPanelBody"})({name:"1npn4o",styles:"overflow-x:auto;padding:0;"}),ct=Object(k.a)("div",{target:"e1n2302f1",label:"TableLayout"})("display:grid;grid-template-columns:0.8fr 0.15fr 0.15fr 0.25fr 200px;grid-column-gap:",Object(tt.a)(1.5),";width:100%;"),st=Object(k.a)(Y.default,{target:"e1n2302f2",label:"StyledLoadingIndicator"})({name:"mycoky",styles:"padding-top:10vh;z-index:1;&.loading.overlay{align-items:flex-start;}"}),ut=Object(k.a)(ct,{target:"e1n2302f3",label:"TableRow"})("font-size:",(function(t){return t.theme.fontSizeMedium}),";border-top:1px solid ",(function(t){return t.first?"transparent":t.theme.innerBorder}),";align-items:center;padding:",Object(tt.a)(1)," ",Object(tt.a)(2),";"),lt=Object(k.a)("div",{target:"e1n2302f4",label:"TableData"})({name:"i6bazn",styles:"overflow:hidden;"}),ft=Object(k.a)(lt,{target:"e1n2302f5",label:"EventTitle"})("padding-right:",Object(tt.a)(2),";",_.a,";"),pt=Object(k.a)(V.a,{target:"e1n2302f6",label:"StyledDateTime"})("color:",(function(t){return t.theme.gray300}),";",_.a,";");function dt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function vt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dt(Object(n),!0).forEach((function(e){l()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function bt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var o=R()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O()(this,n)}}var ht=function(t,e){if(!(t=Object(M.a)(t)).previous.results)return"1-".concat(e);var n=(Number(t.previous.cursor.split(":")[1])+Number(t.next.cursor.split(":")[1]))/2+1;return"".concat(n,"-").concat(n+e-1)},yt=function(t){g()(n,t);var e=bt(n);function n(){return v()(this,n),e.apply(this,arguments)}return h()(n,[{key:"getEndpoints",value:function(){var t=this.props,e=t.organization,n=t.location.query,r=n.statsPeriod,o=p()(n,["statsPeriod"]);return[["eventsMeta","/organizations/".concat(e.slug,"/events-meta/"),{query:Object(T.a)(vt({statsPeriod:r},o))}]]}},{key:"onRequestError",value:function(){D.c(new Error('Unable to fetch "total event count"'))}},{key:"renderError",value:function(){return null}},{key:"renderBody",value:function(){var t=this.state.eventsMeta,e=this.props,n=e.isAllResults,r=e.numRows,o=n?r:t.count;return Object(L.b)(" of ".concat(o.toLocaleString()).concat(n?"":" (estimated)"))}}]),n}(q.a),gt=function(t){g()(r,t);var e,n=bt(r);function r(){var t;v()(this,r);for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return(t=n.call.apply(n,[this].concat(o))).shouldReload=!0,t.handleZoom=function(){return t.setState({zoomed:!0})},t.handleTableUpdateComplete=function(){return t.setState({zoomed:!1})},t}return h()(r,[{key:"shouldComponentUpdate",value:function(t,e){var n=this;return this.state!==e||!!["path","search"].find((function(e){return!C()(n.props.location[e],t.location[e])}))}},{key:"getEndpoints",value:function(){var t=this.props,e=t.organization,n=t.location.query,r=n.statsPeriod,o=p()(n,["statsPeriod"]);return[["events","/organizations/".concat(e.slug,"/events/"),{query:Object(T.a)(vt({statsPeriod:r},o))}]]}},{key:"getTitle",value:function(){return"Events - ".concat(this.props.organization.slug)}},{key:"handleRequestSuccess",value:(e=i()(o.a.mark((function t(e){var n,a,i,c,u,l,f,p,d,v,b,h=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.stateKey,i=e.data,"1"!==(c=e.jqXHR).getResponseHeader("X-Sentry-Direct-Hit")){t.next=11;break}return u=this.props.organization,l=i[0],t.next=6,this.api.requestPromise("/organizations/".concat(u.slug,"/projects/"),{query:{query:"id:".concat(l.projectID)}});case 6:if(!((f=t.sent)&&f.length>0)){t.next=11;break}return p=f[0],P.browserHistory.replace("/organizations/".concat(u.slug,"/projects/").concat(p.slug,"/events/").concat(l.eventID,"/")),t.abrupt("return");case 11:for(d=h.length,v=new Array(d>1?d-1:0),b=1;b<d;b++)v[b-1]=h[b];(n=s()(R()(r.prototype),"handleRequestSuccess",this)).call.apply(n,[this,{stateKey:a,data:i,jqXHR:c}].concat(v));case 13:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"onRequestError",value:function(t){t&&t.responseJSON&&t.responseJSON.detail&&Object(E.a)(t.responseJSON.detail)}},{key:"renderRowCounts",value:function(){var t=this.state,e=t.events,n=t.eventsPageLinks;return n?ht(n,e.length):null}},{key:"renderError",value:function(){return this.renderBody()}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderBody",value:function(){var t=this.props,e=t.organization,n=t.location,o=t.router,a=this.state,i=a.error,c=a.loading,u=a.reloading,l=a.events,f=a.eventsPageLinks,p=c||i||!f?{}:Object(M.a)(f);return Object(Z.f)(w.a.Fragment,null,i&&s()(R()(r.prototype),"renderError",this).call(this,new Error("Unable to load all required endpoints"),!1,!0),Object(Z.f)(U.a,null,Object(Z.f)(K,{router:o,query:n.query.query,organization:e,onZoom:this.handleZoom})),Object(Z.f)(at,{loading:!u&&c,reloading:u,zoomChanged:this.state.zoomed,events:l,organization:e,onUpdateComplete:this.handleTableUpdateComplete}),!c&&!u&&!i&&Object(Z.f)(Ot,null,Object(Z.f)(mt,null,l.length?Object(L.b)("Results ".concat(this.renderRowCounts())):Object(L.b)("No Results"),!!l.length&&f&&Object(Z.f)(x.a,{features:["internal-catchall"]},Object(Z.f)(yt,{organization:e,location:n,isAllResults:!p.previous.results&&!p.next.results,numRows:l.length}))),Object(Z.f)(jt,{pageLinks:f})))}}]),r}(I.a),jt=Object(k.a)(N.a,{target:"e1nvp54h0",label:"PaginationNoMargin"})({name:"1uk1gs8",styles:"margin:0;"}),Ot=Object(k.a)("div",{target:"e1nvp54h1",label:"PaginationWrapper"})({name:"1lekzkb",styles:"display:flex;align-items:center;justify-content:space-between;"}),mt=Object(k.a)("div",{target:"e1nvp54h2",label:"RowDisplay"})("color:",(function(t){return t.theme.gray200}),";");e.default=Object(B.a)(gt)}}]);
//# sourceMappingURL=Events.js.map