(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[163],{1918:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(9),a=n.n(r),i=n(10),o=n.n(i),c=n(11),u=n.n(c),s=n(12),l=n.n(s),f=n(6),g=n.n(f),p=(n(1),n(264)),b=n.n(p),d=n(704),h=n(0);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return l()(this,n)}}var O=function(e){u()(n,e);var t=j(n);function n(){return a()(this,n),t.apply(this,arguments)}return o()(n,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return Object(h.f)(b.a,{title:"".concat(e?"".concat(e," - "):"","Sentry")},this.renderComponent())}}]),n}(d.a);O.displayName="AsyncView"},1920:function(e,t,n){"use strict";var r=n(14),a=n.n(r),i=n(9),o=n.n(i),c=n(10),u=n.n(c),s=n(11),l=n.n(s),f=n(12),g=n.n(f),p=n(6),b=n.n(p),d=n(3),h=n(1),j=n.n(h),O=n(220),m=n(7),v=n(0);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var a=b()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var w=function(e){l()(n,e);var t=y(n);function n(){return o()(this,n),t.apply(this,arguments)}return u()(n,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.subtitle,i=e.action,o=e.tabs,c=e.noTitleStyles,u=e.body,s=a()(e,["icon","title","subtitle","action","tabs","noTitleStyles","body"]),l=!r;return Object(v.f)("div",s,Object(v.f)(k,{isNarrow:l},Object(v.f)(S,null,t&&Object(v.f)(x,null,t),n&&Object(v.f)(T,{tabs:o,styled:c},Object(v.f)(O.a,null,n),r&&Object(v.f)(R,null,r))),i&&Object(v.f)(C,{isNarrow:l},i)),u&&Object(v.f)(B,null,u),o&&Object(v.f)(F,null,o))}}]),n}(j.a.Component);w.displayName="UnstyledSettingsPageHeader",w.defaultProps={noTitleStyles:!1};var k=Object(d.a)("div",{target:"e1uay4fd0",label:"TitleAndActions"})("display:flex;align-items:",(function(e){return e.isNarrow?"center":"flex-start"}),";"),S=Object(d.a)("div",{target:"e1uay4fd1",label:"TitleWrapper"})({name:"1rr4qq7",styles:"flex:1;"}),T=Object(d.a)("div",{target:"e1uay4fd2",label:"Title"})((function(e){return!e.styled&&"font-size: 20px; font-weight: 600;"}),";margin:",Object(m.a)(4)," ",Object(m.a)(2)," ",Object(m.a)(3)," 0;"),R=Object(d.a)("div",{target:"e1uay4fd3",label:"Subtitle"})("color:",(function(e){return e.theme.gray400}),";font-weight:400;font-size:",(function(e){return e.theme.fontSizeLarge}),";padding:",Object(m.a)(1.5)," 0 0;"),x=Object(d.a)("div",{target:"e1uay4fd4",label:"Icon"})("margin-right:",Object(m.a)(1),";"),C=Object(d.a)("div",{target:"e1uay4fd5",label:"Action"})("margin-top:",(function(e){return e.isNarrow?"0":Object(m.a)(4)}),";"),E=Object(d.a)(w,{target:"e1uay4fd6",label:"SettingsPageHeader"})("font-size:14px;margin-top:-",Object(m.a)(4),";"),B=Object(d.a)("div",{target:"e1uay4fd7",label:"BodyWrapper"})("flex:1;margin:0 0 ",Object(m.a)(3),";"),F=Object(d.a)("div",{target:"e1uay4fd8",label:"TabsWrapper"})({name:"8k0ai7",styles:"flex:1;margin:0;"});t.a=E},1921:function(e,t,n){"use strict";t.a=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r="".concat(e," - ").concat(t);return n?"".concat(r," - Sentry"):r}},2219:function(e,t,n){"use strict";n.r(t),n.d(t,"route",(function(){return g})),n.d(t,"fields",(function(){return p}));var r=n(3),a=n(1),i=n.n(a),o=n(2300),c=n(43),u=n(2),s=n(7),l=n(722),f=n(0),g="/settings/:orgId/projects/:projectId/issue-grouping/",p={fingerprintingRules:{name:"fingerprintingRules",type:"string",label:Object(u.b)("Fingerprint Rules"),hideLabel:!0,placeholder:Object(u.b)("error.type:MyException -> fingerprint-value\nstack.function:some_panic_function -> fingerprint-value"),multiline:!0,monospace:!0,autosize:!0,inline:!1,maxRows:20,saveOnBlur:!1,saveMessageAlertType:"info",saveMessage:Object(u.b)("Changing fingerprint rules will apply to future events only (can take up to a minute)."),formatMessageValue:!1,help:function(){return Object(f.f)(i.a.Fragment,null,Object(f.f)(b,null,Object(u.c)("This can be used to modify the fingerprint rules on the server with custom rules.\n        Rules follow the pattern [pattern]. To learn more about fingerprint rules, [docs:read the docs].",{pattern:Object(f.f)("code",null,"matcher:glob -> fingerprint, values"),docs:Object(f.f)(c.a,{href:"https://docs.sentry.io/platform-redirect/?next=%2Fdata-management%2Fevent-grouping%2Fserver-side-fingerprinting%2F"})})),Object(f.f)(d,null,"# force all errors of the same type to have the same fingerprint\nerror.type:DatabaseUnavailable -> system-down\n# force all memory allocation errors to be grouped together\nstack.function:malloc -> memory-allocation-error"))},visible:!0},groupingEnhancements:{name:"groupingEnhancements",type:"string",label:Object(u.b)("Stack Trace Rules"),hideLabel:!0,placeholder:Object(u.b)("stack.function:raise_an_exception ^-group\nstack.function:namespace::* +app"),multiline:!0,monospace:!0,autosize:!0,inline:!1,maxRows:20,saveOnBlur:!1,saveMessageAlertType:"info",saveMessage:Object(u.b)("Changing stack trace rules will apply to future events only (can take up to a minute)."),formatMessageValue:!1,help:function(){return Object(f.f)(i.a.Fragment,null,Object(f.f)(b,null,Object(u.c)("This can be used to enhance the grouping algorithm with custom rules.\n        Rules follow the pattern [pattern]. To learn more about stack trace rules, [docs:read the docs].",{pattern:Object(f.f)("code",null,"matcher:glob [^v]?[+-]flag"),docs:Object(f.f)(c.a,{href:"https://docs.sentry.io/platform-redirect/?next=%2Fdata-management%2Fevent-grouping%2Fgrouping-enhancements%2F"})})),Object(f.f)(d,null,"# remove all frames above a certain function from grouping\nstack.function:panic_handler ^-group\n# mark all functions following a prefix in-app\nstack.function:mylibrary_* +app"))},validate:function(){return[]},visible:!0},groupingConfig:{name:"groupingConfig",type:"array",label:Object(u.b)("Grouping Config"),saveOnBlur:!1,saveMessageAlertType:"info",saveMessage:Object(u.b)("Changing grouping config will apply to future events only (can take up to a minute)."),selectionInfoFunction:function(e){var t=e.groupingConfigs,n=e.value,r=t.find((function(e){return e.id===n})),a=(null==r?void 0:r.changelog)||"";return a?Object(f.f)(h,null,Object(f.f)(j,null,Object(u.c)("New in version [version]",{version:r.id}),":"),Object(f.f)("div",{dangerouslySetInnerHTML:{__html:Object(l.a)(a)}})):null},choices:function(e){return e.groupingConfigs.map((function(e){var t=e.id,n=e.hidden;return[t.toString(),Object(f.f)(o.a,{key:t,isHidden:n},t)]}))},help:Object(u.b)("Sets the grouping algorithm to be used for new events."),visible:function(e){return e.features.has("set-grouping-config")}},groupingEnhancementsBase:{name:"groupingEnhancementsBase",type:"array",label:Object(u.b)("Stack Trace Rules Base"),saveOnBlur:!1,saveMessageAlertType:"info",saveMessage:Object(u.b)("Changing base will apply to future events only (can take up to a minute)."),selectionInfoFunction:function(e){var t=e.groupingEnhancementBases,n=e.value,r=t.find((function(e){return e.id===n})),a=(null==r?void 0:r.changelog)||"";return a?Object(f.f)(h,null,Object(f.f)(j,null,Object(u.c)("New in version [version]",{version:r.id}),":"),Object(f.f)("div",{dangerouslySetInnerHTML:{__html:Object(l.a)(a)}})):null},choices:function(e){return e.groupingEnhancementBases.map((function(e){var t=e.id;return[t.toString(),Object(f.f)(o.a,{key:t},t)]}))},help:Object(u.b)("The built-in base version of stack trace rules."),visible:function(e){return e.features.has("set-grouping-config")}}},b=Object(r.a)("div",{target:"e11tperv0",label:"RuleDescription"})("margin-bottom:",Object(s.a)(1),";margin-top:-",Object(s.a)(1),";margin-right:36px;"),d=Object(r.a)("pre",{target:"e11tperv1",label:"RuleExample"})("margin-bottom:",Object(s.a)(1),";margin-right:36px;"),h=Object(r.a)("div",{target:"e11tperv2",label:"Changelog"})("position:relative;top:-1px;margin-bottom:-1px;padding:",Object(s.a)(2),";border-bottom:1px solid ",(function(e){return e.theme.innerBorder}),";background:",(function(e){return e.theme.backgroundSecondary}),";font-size:",(function(e){return e.theme.fontSizeMedium}),";&:last-child{border:0;border-bottom-left-radius:",(function(e){return e.theme.borderRadius}),";border-bottom-right-radius:",(function(e){return e.theme.borderRadius}),";}"),j=Object(r.a)("h3",{target:"e11tperv3",label:"ChangelogTitle"})("font-size:",(function(e){return e.theme.fontSizeMedium}),";margin-bottom:",Object(s.a)(.75)," !important;")},2904:function(e,t,n){"use strict";n.r(t);var r=n(5),a=n.n(r),i=n(8),o=n.n(i),c=n(9),u=n.n(c),s=n(10),l=n.n(s),f=n(180),g=n.n(f),p=n(11),b=n.n(p),d=n(12),h=n.n(d),j=n(6),O=n.n(j),m=n(1),v=n.n(m),y=n(47),w=n(129),k=n(43),S=n(2219),T=n(2),R=n(1921),x=n(1918),C=n(322),E=n(708),B=n(1920),F=n(706),M=n(21),P=n.n(M),D=n(30),I=n.n(D),N=n(34),z=n(70),U=n(26),_=n(138),A=n(96),G=n(285),L=n(722),H=n(707),W=n(0);function q(e){var t=e.groupingConfigs,n=e.groupingEnhancementBases,r=e.organization,a=e.projectId,i=e.project,o=e.onUpgrade,c=e.api,u=r.access.includes("project:write"),s=function(e,t,n){var r={},a="",i=0,o=null,c=null;if(t.forEach((function(t){r[t.id]=t,t.latest&&e.groupingConfig!==t.id&&(a=t.changelog,o=t,i=t.risk)})),o)for(var u,s=null!==(u=o.base)&&void 0!==u?u:"";s!==e.groupingConfig;){var l,f=r[s];if(!f)break;i=Math.max(i,f.risk),a=f.changelog+"\n"+a,s=null!==(l=f.base)&&void 0!==l?l:""}return n.forEach((function(t){t.latest&&e.groupingEnhancementsBase!==t.id&&(a+="\n\n"+t.changelog,c=t)})),{updateNotes:a,riskLevel:i,latestGroupingConfig:o,latestEnhancementsBase:c}}(i,t,n),l=s.updateNotes,f=s.riskLevel,g=s.latestGroupingConfig,p=s.latestEnhancementsBase,b=function(e){switch(e){case 0:return{riskNote:Object(T.b)("This upgrade has the chance to create some new issues."),alertType:"info"};case 1:return{riskNote:Object(T.b)("This upgrade will create some new issues."),alertType:"warning"};case 2:return{riskNote:Object(W.f)("strong",null,Object(T.b)("The new grouping strategy is incompatible with the current and will create entirely new issues.")),alertType:"error"};default:return{riskNote:void 0,alertType:void 0}}}(f),d=b.riskNote,h=b.alertType,j=!g&&!p,O={};g&&(O.groupingConfig=g.id),p&&(O.groupingEnhancementsBase=p.id);var m=function(){var e=I()(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(N.b)(Object(T.b)("Changing groupingâ€¦")),e.prev=1,e.next=4,c.requestPromise("/projects/".concat(r.slug,"/").concat(a,"/"),{method:"PUT",data:O});case 4:t=e.sent,Object(N.d)(),y.a.updateSuccess(t),o(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),Object(G.a)(Object(T.b)("Unable to upgrade config"));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();if(!t||!n)return null;return Object(W.f)(A.a,{id:"upgrade-grouping"},Object(W.f)(A.e,null,Object(T.b)("Upgrade Grouping")),Object(W.f)(A.c,null,Object(W.f)(H.a,{label:Object(T.b)("Upgrade Grouping Strategy"),help:Object(T.c)("If the project uses an old grouping strategy an update is possible.[linebreak]Doing so will cause new events to group differently.",{linebreak:Object(W.f)("br",null)}),disabled:!0},Object(W.f)(_.a,{disabled:j,onConfirm:m,priority:f>=2?"danger":"primary",confirmText:Object(T.b)("Upgrade"),message:Object(W.f)(v.a.Fragment,null,Object(W.f)(F.a,null,Object(W.f)("strong",null,Object(T.b)("Upgrade Grouping Strategy"))),Object(W.f)(F.a,null,Object(T.b)("You can upgrade the grouping strategy to the latest but this is an irreversible operation.")),Object(W.f)(F.a,null,Object(W.f)("strong",null,Object(T.b)("New Behavior")),Object(W.f)("div",{dangerouslySetInnerHTML:{__html:Object(L.a)(l)}})),Object(W.f)(F.a,null,Object(W.f)(z.b,{type:h},d)))},Object(W.f)("div",null,Object(W.f)(U.b,{disabled:!u||j,title:u?j?Object(T.b)("You are already on the latest version"):void 0:Object(T.b)("You do not have sufficient permissions to do this"),type:"button",priority:f>=2?"danger":"primary"},Object(T.b)("Upgrade Grouping Strategy")))))))}q.displayName="UpgradeGrouping";var V=q;function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}var Q=function(e){b()(n,e);var t=K(n);function n(){var e;u()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).handleSubmit=function(e){y.a.updateSuccess(e)},e}return l()(n,[{key:"getTitle",value:function(){var e=this.props.params.projectId;return Object(R.a)(Object(T.b)("Issue Grouping"),e,!1)}},{key:"getDefaultState",value:function(){return J(J({},g()(O()(n.prototype),"getDefaultState",this).call(this)),{},{groupingConfigs:[],groupingEnhancementBases:[]})}},{key:"getEndpoints",value:function(){return[["groupingConfigs","/grouping-configs/"],["groupingEnhancementBases","/grouping-enhancements/"]]}},{key:"renderBody",value:function(){var e=this.state,t=e.groupingConfigs,n=e.groupingEnhancementBases,r=this.props,i=r.organization,o=r.project,c=r.params,u=c.orgId,s=c.projectId,l="/projects/".concat(u,"/").concat(s,"/"),f=new Set(i.access),g={additionalFieldProps:{organization:i,groupingConfigs:t,groupingEnhancementBases:n},features:new Set(i.features),access:f,disabled:!f.has("project:write")};return Object(W.f)(v.a.Fragment,null,Object(W.f)(B.a,{title:Object(T.b)("Issue Grouping")}),Object(W.f)(F.a,null,Object(T.c)("All events have a fingerprint. Events with the same fingerprint are grouped together into an issue. To learn more about issue grouping, [link: read the docs].",{link:Object(W.f)(k.a,{href:"https://docs.sentry.io/platform-redirect/?next=%2Fdata-management%2Fevent-grouping%2F"})})),Object(W.f)(C.a,{saveOnBlur:!0,allowUndo:!0,initialData:o,apiMethod:"PUT",apiEndpoint:l,onSubmitSuccess:this.handleSubmit},Object(W.f)(E.a,a()({},g,{title:Object(T.b)("Fingerprint Rules"),fields:[S.fields.fingerprintingRules]})),Object(W.f)(E.a,a()({},g,{title:Object(T.b)("Stack Trace Rules"),fields:[S.fields.groupingEnhancements]})),Object(W.f)(w.a,{features:["set-grouping-config"],organization:i},Object(W.f)(E.a,a()({},g,{title:Object(T.b)("Change defaults"),fields:[S.fields.groupingConfig,S.fields.groupingEnhancementsBase]}))),Object(W.f)(V,{groupingConfigs:null!=t?t:[],groupingEnhancementBases:null!=n?n:[],organization:i,projectId:c.projectId,project:o,api:this.api,onUpgrade:this.fetchData})))}}]),n}(x.a);t.default=Q}}]);
//# sourceMappingURL=ProjectIssueGrouping.js.map