(window["webpackJsonprun-callable"]=window["webpackJsonprun-callable"]||[]).push([[0],{218:function(e,t,a){e.exports=a(427)},223:function(e,t,a){},245:function(e,t,a){},427:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),r=a(7),o=a.n(r),c=(a(223),a(113)),i=a(97),s=a(38),u=a(39),d=a(41),m=a(40),p=a(42),f=a(158),h=a(63),b=a(61),g=a(66),v=a(430),y=a(438),E=a(437),O=a(64),w=a(8),j=a(439),k=a(441),C=a(444),x=a(443),M=a(436),S=a(216),L=a(440),D=a(435),F=a(432),R=a(445),T=a(13),I=a(433),N=a(434),_=a(65),P=a(99),B=a(49),U=a.n(B),A=a(11),Y=a.n(A),H=a(120),W=a(431),q=a(442);a(244),a(245);function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e}).apply(this,arguments)}function V(e,t){if(null==e)return{};var a,l,n=function(e,t){if(null==e)return{};var a,l,n={},r=Object.keys(e);for(l=0;l<r.length;l++)a=r[l],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)a=r[l],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var z=n.a.createElement("title",null,"\u7f16\u7ec4"),X=n.a.createElement("desc",null,"Created with Sketch."),J=n.a.createElement("defs",null,n.a.createElement("path",{d:"M6.48075496,131.95025 L24.9627073,150.431098 C23.6769032,156.417298 23,162.629599 23,169 C23,217.601058 62.398942,257 111,257 C117.370401,257 123.582702,256.323097 129.568902,255.037293 L149.04975,274.519245 C137.316712,278.71484 124.67522,281 111.5,281 C49.9202504,281 1.42108547e-14,231.07975 1.42108547e-14,169.5 C1.42108547e-14,156.32478 2.28516018,143.683288 6.48075496,131.95025 Z M111.5,58 C173.07975,58 223,107.92025 223,169.5 C223,183.225266 220.520053,196.371309 215.983803,208.514485 L196.670284,189.201335 C198.193974,182.714721 199,175.951489 199,169 C199,120.398942 159.601058,81 111,81 C104.048511,81 97.2852792,81.8060255 90.7986652,83.3297162 L72.4855155,65.0161969 C84.628691,60.4799473 97.7747341,58 111.5,58 Z",id:"path-1"}),n.a.createElement("filter",{x:"0.0%",y:"0.0%",width:"100.0%",height:"100.0%",filterUnits:"objectBoundingBox",id:"filter-2"},n.a.createElement("feGaussianBlur",{stdDeviation:0,in:"SourceGraphic"}))),Z=n.a.createElement("g",{id:"\\u9875\\u9762-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},n.a.createElement("g",{id:"\\u7F16\\u7EC4",transform:"translate(0.270599, -58.000000)"},n.a.createElement("mask",{id:"mask-3",fill:"white"},n.a.createElement("use",{xlinkHref:"#path-1"})),n.a.createElement("use",{id:"\\u5F62\\u72B6\\u7ED3\\u5408",fill:"#000000",filter:"url(#filter-2)",xlinkHref:"#path-1"}),n.a.createElement("text",{id:"t",fontFamily:"STBaoliSC-Regular, Baoli SC",fontSize:201,fontWeight:"normal",fill:"#000000"},n.a.createElement("tspan",{x:71,y:213},"t")))),$=function(e){var t=e.svgRef,a=e.title,l=V(e,["svgRef","title"]);return n.a.createElement("svg",G({width:"224px",height:"223px",viewBox:"0 0 224 223",ref:t},l),void 0===a?z:n.a.createElement("title",null,a),X,J,Z)},K=n.a.forwardRef(function(e,t){return n.a.createElement($,G({svgRef:t},e))});a.p;function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e}).apply(this,arguments)}function ee(e,t){if(null==e)return{};var a,l,n=function(e,t){if(null==e)return{};var a,l,n={},r=Object.keys(e);for(l=0;l<r.length;l++)a=r[l],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)a=r[l],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var te=n.a.createElement("title",null,"Touch Callable"),ae=n.a.createElement("desc",null,"Created with Sketch."),le=n.a.createElement("g",{id:"\\u9875\\u9762-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd",fontFamily:"GoMonoForPowerline, Go Mono for Powerline",fontSize:24,fontWeight:"normal"},n.a.createElement("g",{id:"\\u753B\\u677F",transform:"translate(-640.000000, -73.000000)",fill:"#000000"},n.a.createElement("text",{id:"Touch-Callable"},n.a.createElement("tspan",{x:640,y:92},"Touch Callable")))),ne=function(e){var t=e.svgRef,a=e.title,l=ee(e,["svgRef","title"]);return n.a.createElement("svg",Q({width:"200px",height:"20px",viewBox:"0 0 200 20",ref:t},l),void 0===a?te:n.a.createElement("title",null,a),ae,le)},re=n.a.forwardRef(function(e,t){return n.a.createElement(ne,Q({svgRef:t},e))});a.p;function oe(e){return{type:"updateCallables",callables:e}}function ce(e){return{type:"setLocale",locale:e}}function ie(e){return{type:"changeModuleStatus",hasNew:e}}var se={callables:[],locale:_.a,hasNewModule:!1};var ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"updateCallables":return Object.assign({},e,{callables:t.callables});case"setLocale":return Object.assign({},e,{locale:t.locale});case"changeModuleStatus":return Object.assign({},e,{hasNewModule:t.hasNew});default:return e}},de={touch:"Touch",updateCompleted:"Update completed",reloadModule:"Reload module",moduleChanged:"Module changed",parameterList:"Parameter list",noDoc:"No document",callables:"Callables",upload:"Upload",pleaseUploadFile:"Please upload file",executionFailed:"Execution failed",executionSucceed:"Execution succeed",pleaseInput:"Please input {parameterName}"},me={touch:"\u8fd0\u884c",updateCompleted:"\u66f4\u65b0\u6210\u529f",reloadModule:"\u91cd\u52a0\u8f7d\u6a21\u5757",moduleChanged:"\u6a21\u5757\u6709\u66f4\u65b0\uff01",parameterList:"\u53c2\u6570\u5217\u8868",noDoc:"\u6ca1\u6709\u6587\u6863",callables:"\u529f\u80fd\u5217\u8868",upload:"\u4e0a\u4f20",pleaseUploadFile:"\u8bf7\u4e0a\u4f20\u6587\u4ef6",executionFailed:"\u6267\u884c\u5931\u8d25",executionSucceed:"\u6267\u884c\u6210\u529f",pleaseInput:"\u8bf7\u8f93\u5165 {parameterName}"};function pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,l)}return a}var fe=v.a.Header,he=v.a.Content,be=v.a.Footer,ge=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.setCallables;U.a.get("callable").then(function(t){e(t.data)})}},{key:"render",value:function(){return n.a.createElement(y.a,{itemLayout:"horizontal",dataSource:this.props.callables,renderItem:function(e){return n.a.createElement(y.a.Item,null,n.a.createElement(y.a.Item.Meta,{title:n.a.createElement(f.b,{to:"/callable/".concat(e.callable_name)},e.callable_name),description:e.title}))}})}}]),t}(l.Component),ve=function(e){return Object(b.a)({setCallables:oe},e)},ye=Object(g.b)(function(e){return{callables:e.callables}},ve)(Object(H.c)(ge)),Ee=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){var t=Object(i.a)(e.fileList);t.length>=1&&a.setState({disabled:!0}),a.setState({fileList:t}),a.props.onChange(t)},a.onRemove=function(e){return a.setState({disabled:!1}),!0},a.state={fileList:[],disabled:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.disabled,t={onChange:this.handleChange,onRemove:this.onRemove};return n.a.createElement(E.a,Object.assign({},t,{beforeUpload:function(e){return!1},fileList:this.state.fileList}),0===this.state.fileList.length?n.a.createElement(O.a,{disabled:e},n.a.createElement(w.a,{type:"upload"})," ",n.a.createElement(W.a,{id:"upload"})):null)}}]),t}(n.a.Component),Oe=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){for(var l={},n={},r=0,o=Object.keys(t);r<o.length;r++){var i=o[r],s=t[i];Array.isArray(s)&&0!==s.length&&s[0]instanceof Object&&s[0].originFileObj instanceof File?l[i]=t[i][0].originFileObj:n[i]=t[i]}var u={};if("BufferedReader"===a.callable.return_type&&(u={responseType:"blob"}),0===Object.keys(l).length)U.a.post("callable/".concat(a.props.match.params.name),t,u).then(function(e){if(e.headers["content-disposition"]){var t=new Blob([e.data],{type:e.headers["content-type"]}),l=document.createElement("a"),n=window.URL.createObjectURL(t);return l.href=n,l.download=decodeURI(e.headers["content-disposition"].split("=")[1]),l.click(),void window.URL.revokeObjectURL(n)}"success"===e.data.status?a.showSuccessModal(e.data.result):a.showErrorModal(e.data.result)});else{var d=new FormData;d.set("json",JSON.stringify(n));for(var m=0,p=Object.keys(l);m<p.length;m++)i=p[m],d.append(i,l[i]);U()(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pe(a,!0).forEach(function(t){Object(c.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pe(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({method:"post",url:"callable/".concat(a.props.match.params.name),data:d,headers:{"Content-Type":"multipart/form-data"}},u)).then(function(e){"success"===e.data.status?a.showSuccessModal(e.data.result):a.showErrorModal(e.data.result)})}}})},a.setCallable=function(){var e,t=a.props.match.params.name,l=!0,n=!1,r=void 0;try{for(var o,c=a.props.callables[Symbol.iterator]();!(l=(o=c.next()).done);l=!0)if((e=o.value).callable_name===t){a.callable=e;break}}catch(i){n=!0,r=i}finally{try{l||null==c.return||c.return()}finally{if(n)throw r}}},a.normFile=function(e){return Array.isArray(e)?e:e&&e.fileList},a.buildFormItem=function(e,t,l){var r,o=a.props.form.getFieldDecorator,c=e.name;if(["BytesIO","BinaryIO"].includes(e.annotation))return n.a.createElement(j.a.Item,{label:c,key:t},o(c,{valuePropName:"fileList",getValueFromEvent:a.normFile,rules:[{required:e.required,message:n.a.createElement(W.a,{id:"pleaseUploadFile"})}]})(n.a.createElement(Ee,null)));switch(e.annotation){case"str":r=n.a.createElement(k.a,{allowClear:!0});break;case"float":r=n.a.createElement(C.a,{allowClear:!0});break;case"int":r=n.a.createElement(C.a,{parser:function(e){return Math.floor(e)},allowClear:!0});break;case"bool":r=n.a.createElement(x.a.Group,{buttonStyle:"solid"},n.a.createElement(x.a.Button,{value:!0},"True"),n.a.createElement(x.a.Button,{value:!1},"False"));break;case"datetime":r=n.a.createElement(M.a,{showTime:!0});break;case"date":r=n.a.createElement(M.a,null);break;case"time":r=n.a.createElement(S.a,null);break;case"Enum":r=n.a.createElement(x.a.Group,{buttonStyle:"solid"},e.enum_values.map(function(e,t,a){return n.a.createElement(x.a.Button,{value:e,key:t},e)}));break;default:r=n.a.createElement(k.a,null)}return n.a.createElement(j.a.Item,{label:c,key:t},o(c,{initialValue:a.buildDefaultValue(e),rules:[{required:e.required,message:a.props.intl.formatMessage({id:"pleaseInput"},{parameterName:c})}]})(r))},a.buildDefaultValue=function(e){return"time"===e.annotation&&e.default?Y()(e.default,"HH:mm:ss"):"date"===e.annotation&&e.default?Y()(e.default,'"YYYY-MM-DD"'):"datetime"===e.annotation&&e.default?Y()(e.default,'"YYYY-MM-DDTHH:mm:ss"'):e.default};var l=a.props.callables;return a.state={visible:!1,response:null,callables:l},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.setCallables;U.a.get("callable").then(function(t){e(t.data)})}},{key:"showSuccessModal",value:function(e){L.a.success({title:this.props.intl.formatMessage({id:"executionSucceed"}),content:e})}},{key:"showErrorModal",value:function(e){L.a.error({title:this.props.intl.formatMessage({id:"executionFailed"}),content:e})}},{key:"render",value:function(){var e=this;return this.setCallable(),n.a.createElement(D.a,{style:{border:"1px solid rgb(235, 237, 240)"},onBack:function(){return e.props.history.push("/")},title:this.props.intl.formatMessage({id:"callables"})},n.a.createElement(j.a,{layout:"vertical",onSubmit:this.handleSubmit},n.a.createElement(F.a,null,this.callable?this.callable.callable_name:""),n.a.createElement("pre",null,this.callable&&this.callable.doc?this.callable.doc:n.a.createElement(W.a,{id:"noDoc"})),this.callable&&this.callable.parameters.length?n.a.createElement(F.a,null,n.a.createElement(W.a,{id:"parameterList"})):[],this.callable?this.callable.parameters.map(this.buildFormItem):[],n.a.createElement(j.a.Item,{wrapperCol:{span:24}},n.a.createElement(O.a,{type:"primary",htmlType:"submit",block:!0},n.a.createElement(W.a,{id:"touch"})))))}}]),t}(n.a.Component),we=j.a.create({name:"callablForm"})(Object(H.c)(Oe)),je=Object(g.b)(function(e){return{callables:e.callables}},ve)(we),ke=function(e){function t(){var e,a;Object(s.a)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).getLocaleText=function(e){return e===_.a?"English":e===P.a?"\u4e2d\u6587":void 0},a.state={localeText:a.getLocaleText(a.props.locale)},a.onChangeLocale=function(e){var t=a.props,l=t.setLocale,n=t.locale,r=null;n===_.a?r=P.a:n===P.a&&(r=_.a),U.a.post("locale",{locale:r.locale}),l(r),a.setState({localeText:a.getLocaleText(r)}),r===_.a?Y.a.locale("en"):Y.a.locale("zh-cn")},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.setLocale,a=e.locale;U.a.get("locale").then(function(e){e.data.locale!==a.locale&&("en"===e.data.locale?t(_.a):t(P.a))})}},{key:"render",value:function(){return n.a.createElement(O.a,{onClick:this.onChangeLocale},this.state.localeText)}}]),t}(l.Component),Ce=function(e){return{locale:e.locale}},xe=Object(g.b)(Ce,function(e){return Object(b.a)({setLocale:ce},e)})(ke),Me=function(e){function t(){var e,a;Object(s.a)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={loading:!1},a.reloadModule=function(e){var t=a.props.updateCallables;a.setState({loading:!0}),U.a.post("reload-module"),U.a.get("callable").then(function(e){t(e.data)}),a.setState({loading:!1}),window.location.reload(!0),R.a.success(a.props.intl.formatMessage({id:"updateCompleted"}),1)},a.queryNewModule=function(){var e=a.props,t=e.hasNewModule,l=e.changeModuleStatus;U.a.get("module-status").then(function(e){e.data.has_new!==t&&(e.data.has_new&&R.a.info(a.props.intl.formatMessage({id:"moduleChanged"}),1),l(e.data.has_new))})},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"tick",value:function(){this.setState(function(e){return{secondsElapsed:e.secondsElapsed+1}})}},{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval(function(){return e.queryNewModule()},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return n.a.createElement(O.a,{disabled:!this.props.hasNewModule,loading:this.state.loading,style:{display:"inline-block",marginRight:"20px"},onClick:this.reloadModule},n.a.createElement(W.a,{id:"reloadModule"}))}}]),t}(l.Component),Se=Object(g.b)(function(e){return{hasNewModule:e.hasNewModule}},function(e){return Object(b.a)({changeModuleStatus:ie,updateCallables:oe},e)})(Object(H.c)(Me)),Le=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){document.title="Touch-Callable"}},{key:"render",value:function(){var e=this.props.locale;return n.a.createElement(T.a,{locale:e},n.a.createElement(q.a,{key:e,locale:e.locale,messages:"en"===e.locale?de:me},n.a.createElement(v.a,{className:"layout",key:e?e.locale:"en"},n.a.createElement(fe,{style:{background:"white",boxShadow:"0px 1px 5px #d0cdcd",height:"unset"}},n.a.createElement(I.a,{type:"flex",justify:"center",align:"middle"},n.a.createElement(N.a,{md:8,xs:24},n.a.createElement(K,{style:{verticalAlign:"middle",marginRight:"20px",width:"48px",height:"48px"}}),n.a.createElement(re,{style:{verticalAlign:"middle",width:"150px"}})),n.a.createElement(N.a,{md:8,xs:24}),n.a.createElement(N.a,{md:8,xs:24,style:{textAlign:"right"}},n.a.createElement(Se,{style:{marginRight:"20px"}}),n.a.createElement(xe,null)))),n.a.createElement(he,{style:{margin:"10px 10px"}},n.a.createElement(I.a,{span:24},n.a.createElement(N.a,{md:6,xs:24}),n.a.createElement(N.a,{md:12,xs:24},n.a.createElement(f.a,null,n.a.createElement(h.c,null,n.a.createElement(h.a,{exact:!0,path:"/",component:ye}),n.a.createElement(h.a,{path:"/callable/:name",component:je})))),n.a.createElement(N.a,{md:6,xs:24}))),n.a.createElement(be,{style:{textAlign:"center"}},"Touch Callable"))))}}]),t}(l.Component),De=Object(g.b)(Ce)(Le);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Fe=Object(b.b)(ue,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__({trace:!0,traceLimit:25}));o.a.render(n.a.createElement(g.a,{store:Fe},n.a.createElement(De,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[218,1,2]]]);
//# sourceMappingURL=main.174d5a92.chunk.js.map