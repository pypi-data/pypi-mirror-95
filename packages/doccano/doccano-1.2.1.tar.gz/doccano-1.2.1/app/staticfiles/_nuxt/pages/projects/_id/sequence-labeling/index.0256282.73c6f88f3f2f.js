(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{1079:function(t,e,n){"use strict";n.r(e);n(10),n(7),n(6),n(3),n(8);var o=n(1),r=n(31);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function c(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={components:{EntityItemBox:n(881).a},computed:c(c(c(c({},Object(r.e)("labels",["items","loading"])),Object(r.e)("documents",{documentLoading:"loading"})),Object(r.c)("documents",["currentDoc"])),{},{isReady:function(){return!!this.currentDoc&&!this.loading&&!this.documentLoading}}),created:function(){this.getLabelList({projectId:this.$route.params.id})},methods:c(c(c({},Object(r.b)("labels",["getLabelList"])),Object(r.b)("documents",["getDocumentList","deleteAnnotation","updateAnnotation","addAnnotation"])),{},{removeEntity:function(t){var e={annotationId:t,projectId:this.$route.params.id};this.deleteAnnotation(e)},updateEntity:function(t,e){var n={annotationId:e,label:t,projectId:this.$route.params.id};this.updateAnnotation(n)},addEntity:function(t,e,n){var o={start_offset:t,end_offset:e,label:n,projectId:this.$route.params.id};this.addAnnotation(o)}})},f=n(15),h={layout:"annotation",components:{EntityItemBox:Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isReady?n("entity-item-box",{attrs:{labels:t.items,text:t.currentDoc.text,entities:t.currentDoc.annotations,"delete-annotation":t.removeEntity,"update-entity":t.updateEntity,"add-entity":t.addEntity}}):t._e()],1)}),[],!1,null,null,null).exports},validate:function(t){var e=t.params,n=t.query;return/^\d+$/.test(e.id)&&/^\d+$/.test(n.page)}},m=n(16),v=n.n(m),y=n(205),x=n(124),w=Object(f.a)(h,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-card",[e("v-card-text",{staticClass:"title"},[e("entity-item-box")],1)],1)}),[],!1,null,null,null);e.default=w.exports;v()(w,{VCard:y.a,VCardText:x.b})},845:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return l}));n(29);var o=function(t){return(299*parseInt(t.substr(1,2),16)+587*parseInt(t.substr(3,2),16)+114*parseInt(t.substr(5,2),16))/1e3<128?"#ffffff":"#000000"},r=function(t,e){return t.forEach((function(t){t.translatedName=l(t.name,e)})),t},l=function(t,e){return"project_admin"===t?e.projectAdmin:"annotator"===t?e.annotator:"annotation_approver"===t?e.annotationApprover:e.undefined}},852:function(t,e,n){var content=n(868);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(14).default)("7c72e486",content,!0,{sourceMap:!1})},853:function(t,e,n){var content=n(870);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(14).default)("fa9e226c",content,!0,{sourceMap:!1})},867:function(t,e,n){"use strict";var o=n(852);n.n(o).a},868:function(t,e,n){(e=n(13)(!1)).push([t.i,'.highlight.blue[data-v-d2913478]{background:#edf4fa!important}.highlight.bottom[data-v-d2913478]{display:block;white-space:normal}.highlight[data-v-d2913478]:first-child{margin-left:0}.highlight[data-v-d2913478]{border:2px solid;margin:4px 6px 4px 3px;vertical-align:middle;box-shadow:2px 4px 20px rgba(0,0,0,.1);position:relative;cursor:default;min-width:26px;line-height:22px;display:flex}.highlight .delete[data-v-d2913478]{top:-15px;left:-13px;position:absolute;display:none}.highlight:hover .delete[data-v-d2913478]{display:block}.highlight__content[data-v-d2913478]{display:flex;flex-wrap:wrap;align-items:center;padding:2px 2px 0 6px}.highlight.bottom .highlight__content[data-v-d2913478]:after{content:" ";padding-right:3px}.highlight__label[data-v-d2913478]{line-height:14px;align-items:center;justify-content:center;display:flex;padding:0 8px;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#fff}.highlight__label[data-v-d2913478]:after{content:attr(data-label);display:block;font-size:14px;-webkit-font-smoothing:subpixel-antialiased;letter-spacing:.1em}.newline[data-v-d2913478]{width:100%}',""]),t.exports=e},869:function(t,e,n){"use strict";var o=n(853);n.n(o).a},870:function(t,e,n){(e=n(13)(!1)).push([t.i,".highlight-container.highlight-container--bottom-labels[data-v-4427d29b]{align-items:flex-start}.highlight-container[data-v-4427d29b]{line-height:42px!important;display:flex;flex-wrap:wrap;white-space:pre-wrap;cursor:default}.highlight-container.highlight-container--bottom-labels .highlight.bottom[data-v-4427d29b]{margin-top:6px}",""]),t.exports=e},881:function(t,e,n){"use strict";n(6),n(45),n(7),n(38),n(42),n(29),n(23),n(24),n(3),n(50);var o=n(30),r=n(845),l={props:{content:{type:String,default:"",required:!0},label:{type:String,default:""},color:{type:String,default:"#64FFDA"},labels:{type:Array,default:function(){return[]},required:!0},newline:{type:Boolean}},data:function(){return{showMenu:!1}},computed:{textColor:function(){return Object(r.a)(this.color)}},methods:{update:function(label){this.$emit("update",label),this.showMenu=!1},remove:function(){this.$emit("remove")}}},c=(n(867),n(15)),d=n(16),f=n.n(d),h=n(171),m=n(206),v=n(138),y=n(207),x=n(22),w=n(214),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.label?n("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[n("span",t._g({staticClass:"highlight bottom",style:{borderColor:t.color}},o),[n("span",{staticClass:"highlight__content"},[t._v(t._s(t.content)),n("v-icon",{staticClass:"delete",on:{click:function(e){return e.stopPropagation(),t.remove(e)}}},[t._v("mdi-close-circle")])],1),n("span",{staticClass:"highlight__label",style:{backgroundColor:t.color,color:t.textColor},attrs:{"data-label":t.label}})])]}}],null,!1,3841481336),model:{value:t.showMenu,callback:function(e){t.showMenu=e},expression:"showMenu"}},[t._v(" "),n("v-list",{staticClass:"overflow-y-auto",attrs:{dense:"","min-width":"150","max-height":"400"}},t._l(t.labels,(function(e,i){return n("v-list-item",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:[e.suffix_key],expression:"[item.suffix_key]",modifiers:{once:!0}}],key:i,on:{shortkey:function(n){return t.update(e)},click:function(n){return t.update(e)}}},[n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1),t._v(" "),n("v-list-item-action",[n("v-list-item-action-text",{domProps:{textContent:t._s(e.suffix_key)}})],1)],1)})),1)],1):n("span",{class:[t.newline?"newline":""]},[t._v(t._s(t.content))])}),[],!1,null,"d2913478",null),_=component.exports;function k(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return j(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return l=t.done,t},e:function(t){c=!0,r=t},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw r}}}}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}f()(component,{VIcon:h.a,VList:m.a,VListItem:v.a,VListItemAction:y.a,VListItemActionText:x.a,VListItemContent:x.b,VListItemTitle:x.c,VMenu:w.a});var O={components:{EntityItem:_},props:{text:{type:String,default:"",required:!0},labels:{type:Array,default:function(){return[]},required:!0},entities:{type:Array,default:function(){return[]},required:!0},deleteAnnotation:{type:Function,default:function(){return[]},required:!0},updateEntity:{type:Function,default:function(){return[]},required:!0},addEntity:{type:Function,default:function(){return[]},required:!0}},data:function(){return{showMenu:!1,x:0,y:0,start:0,end:0}},computed:{sortedEntities:function(){return this.entities.slice().sort((function(a,b){return a.start_offset-b.start_offset}))},chunks:function(){var t,e=[],n=0,r=Object(o.a)(this.text),l=k(this.sortedEntities);try{for(l.s();!(t=l.n()).done;){var c=t.value,d=r.slice(n,c.start_offset).join("");e=e.concat(this.makeChunks(d)),n=c.end_offset;var label=this.labelObject[c.label];d=r.slice(c.start_offset,c.end_offset).join(""),e.push({id:c.id,label:label.text,color:label.background_color,text:d})}}catch(t){l.e(t)}finally{l.f()}return e=e.concat(this.makeChunks(r.slice(n,r.length).join(""))),e},labelObject:function(){var t,e={},n=k(this.labels);try{for(n.s();!(t=n.n()).done;){var label=t.value;e[label.id]=label}}catch(t){n.e(t)}finally{n.f()}return e}},methods:{makeChunks:function(text){var t,e=[],n=text.split("\n"),o=k(n.slice(0,-1));try{for(o.s();!(t=o.n()).done;){var r=t.value;e.push({label:null,color:null,text:r+"\n",newline:!1}),e.push({label:null,color:null,text:"",newline:!0})}}catch(t){o.e(t)}finally{o.f()}return e.push({label:null,color:null,text:n.slice(-1)[0],newline:!1}),e},show:function(t){var e=this;t.preventDefault(),this.showMenu=!1,this.x=t.clientX||t.changedTouches[0].clientX,this.y=t.clientY||t.changedTouches[0].clientY,this.$nextTick((function(){e.showMenu=!0}))},setSpanInfo:function(){var t;if(window.getSelection?t=window.getSelection():document.selection&&(t=document.selection),!(t.rangeCount<=0)){var e=t.getRangeAt(0),n=e.cloneRange();n.selectNodeContents(this.$el),n.setEnd(e.startContainer,e.startOffset),this.start=Object(o.a)(n.toString()).length,this.end=this.start+Object(o.a)(e.toString()).length}},validateSpan:function(){if(void 0===this.start||void 0===this.end)return!1;if(this.start===this.end)return!1;var t,e=k(this.entities);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(n.start_offset<=this.start&&this.start<n.end_offset)return!1;if(n.start_offset<this.end&&this.end<=n.end_offset)return!1;if(this.start<n.start_offset&&n.end_offset<this.end)return!1}}catch(t){e.e(t)}finally{e.f()}return!0},open:function(t){this.setSpanInfo(),this.validateSpan()&&this.show(t)},assignLabel:function(t){this.validateSpan()&&(this.addEntity(this.start,this.end,t),this.showMenu=!1,this.start=0,this.end=0)}}},I=(n(869),Object(c.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"highlight-container highlight-container--bottom-labels",on:{click:t.open,touchend:t.open}},[t._l(t.chunks,(function(e,i){return n("entity-item",{key:i,attrs:{content:e.text,newline:e.newline,label:e.label,color:e.color,labels:t.labels},on:{remove:function(n){return t.deleteAnnotation(e.id)},update:function(n){return t.updateEntity(n.id,e.id)}}})})),t._v(" "),n("v-menu",{attrs:{"position-x":t.x,"position-y":t.y,absolute:"","offset-y":""},model:{value:t.showMenu,callback:function(e){t.showMenu=e},expression:"showMenu"}},[n("v-list",{staticClass:"overflow-y-auto",attrs:{dense:"","min-width":"150","max-height":"400"}},t._l(t.labels,(function(label,i){return n("v-list-item",{directives:[{name:"shortkey",rawName:"v-shortkey",value:[label.suffix_key],expression:"[label.suffix_key]"}],key:i,on:{shortkey:function(e){return t.assignLabel(label.id)},click:function(e){return t.assignLabel(label.id)}}},[n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s(label.text)}})],1),t._v(" "),n("v-list-item-action",[n("v-list-item-action-text",{domProps:{textContent:t._s(label.suffix_key)}})],1)],1)})),1)],1)],2)}),[],!1,null,"4427d29b",null));e.a=I.exports;f()(I,{VList:m.a,VListItem:v.a,VListItemAction:y.a,VListItemActionText:x.a,VListItemContent:x.b,VListItemTitle:x.c,VMenu:w.a})}}]);