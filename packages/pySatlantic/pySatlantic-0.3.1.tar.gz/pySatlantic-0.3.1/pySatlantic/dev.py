from pySatlantic import instrument

if __name__ == '__main__':
    CAL_FILE = 'test_data/HyperSAS009_20200527/HyperSAS+ES_20200212.sip'
    DATA_FILE = 'test_data/HyperSAS009_20200527/HyperSAS+Ref_LabTest_20200527_2.raw'
    # CAL_FILE = ['test_data/HyperPro068_20180826/MPR068_18Jan05.sip', 'test_data/HyperPro068_20180826/HSE0187_23Aug17.sip']
    # DATA_FILE = 'test_data/HyperPro068_20180826/HyperPro068_ES187_20180826_2048.raw'
    # CAL_FILE = 'test_data/HyperNav001_20170809/'
    # DATA_FILE = 'test_data/HyperNav001_20170809/HyperNav1_Multi1.raw'
    s = instrument.SatViewRawToCSV(CAL_FILE, DATA_FILE)
    print('%d/%d' % (s.frame_parsed, s.frame_received))
    # TEST_FRAME_FIXED_LENGTH = b'SATHSL0251\x08\x00\x00\x00\x08I\x08\x15\x08\xc0\x08H\x08;\x08\xb4\x08W\x08E\x08\x80\x08:\x08T\x08`\x08n\x08q\x08_\x08W\x08q\x08{\x08c\x08W\x08k\x08Z\x08J\x08Q\x08C\x08L\x08?\x084\x08:\x08B\x08m\x08D\x08i\x08i\x08E\x08W\x08S\x08E\x08K\x08K\x08C\x087\x08^\x08C\x085\x08\x81\x08A\x083\x08\x95\x08Q\x08-\x08i\x08;\x08\r\x08d\x08q\x08*\x08v\x08\xa2\x08C\x08\x96\x08m\x08I\x08\x8b\x08S\x08R\x08\x95\x081\x08>\x08\x8a\x08A\x08E\x08\x85\x08\'\x08G\x08T\x08\x1a\x084\x08Y\x07\xfd\x08:\x08G\x08\x05\x08\x8d\x089\x08\'\x08u\x083\x08T\x08>\x08-\x08R\x08\x17\x08+\x08m\x08\x1b\x08&\x08\x84\x080\x089\x08x\x08%\x080\x08\x8b\x08\x19\x085\x08y\x08\n\x08\x1d\x08q\x082\x08c\x08\x8c\x08J\x08^\x08}\x08X\x08$\x08t\x08N\x08\x1a\x08w\x08b\x08#\x08\x7f\x08Q\x081\x08x\x08I\x086\x08p\x08]\x08\x18\x08n\x08E\x08\x1e\x08\x91\x080\x085\x08\xaa\x08\x17\x08_\x08u\x08\x0c\x08[\x08-\x08\x15\x08Y\x08-\x08 \x08S\x08$\x08+\x08O\x08\x13\x08;\x089\x08"\x08^\x08@\x08\x0e\x08u\x08E\x08\x17\x08\xbf\x081\x082\x08\xbc\x08<\x08A\x08\x81\x08+\x087\x08c\x08\'\x08.\x08g\x089\x08,\x08a\x0f\x08X\x00\x00\x00\x00\x00\xc0S0009943.02\x88\r\n'
    # i = instrument.Instrument(CAL_FILE)
    # print(i.parse_frame(TEST_FRAME_FIXED_LENGTH, True))
    # i._compute_check_sum(TEST_FRAME_FIXED_LENGTH)
    # print('===')
