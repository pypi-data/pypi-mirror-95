Metadata-Version: 2.1
Name: juju-verify
Version: 0.1
Summary: Juju plugin to verify if it is safe to perform an operation on one or more units
Home-page: https://launchpad.net/juju-verify
Author: Canonical DevOps Centres
License: GPLv3
Platform: UNKNOWN
Classifier: Development Status :: 2 - Pre-Alpha
Classifier: Environment :: Plugins
Classifier: Intended Audience :: Developers
Classifier: Intended Audience :: System Administrators
Classifier: License :: OSI Approved :: GNU General Public License v3 (GPLv3)
Classifier: Operating System :: OS Independent
Classifier: Topic :: System :: Installation/Setup
Classifier: Topic :: Utilities
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.6
Description-Content-Type: text/markdown; charset=UTF-8; variant=GFM
Requires-Dist: juju
Provides-Extra: dev
Requires-Dist: coverage ; extra == 'dev'
Requires-Dist: pytest ; extra == 'dev'
Requires-Dist: pytest-asyncio ; extra == 'dev'
Requires-Dist: pytest-mock ; extra == 'dev'
Provides-Extra: devlint
Requires-Dist: flake8 ; extra == 'devlint'
Requires-Dist: flake8-colors ; extra == 'devlint'
Requires-Dist: flake8-docstrings ; extra == 'devlint'
Requires-Dist: flake8-import-order ; extra == 'devlint'
Requires-Dist: mypy ; extra == 'devlint'
Requires-Dist: pep8-naming ; extra == 'devlint'
Requires-Dist: pylint ; extra == 'devlint'

# Juju verify

This CLI tool is a Juju plugin that allows user to check whether it's safe
to perform some disruptive maintenance operations on Juju units, like `shutdown`
or `reboot`.

## Supported charms

* nova-compute (WIP)
* ceph-osd (WIP)

## Supported checks

* reboot
* shutdown

**NOTE:** Final list of supported checks and what they represent is still WIP

## Usage example

To verify that it is safe to stop/shutdown units `nova-compute/0` and
`nova-compute/1` without affecting the rest of the OpenStack cloud environment,
run the following.

```bash
$ juju-verify shutdown nova-compute/0 nova-compute/1
```

**NOTE:** If you run check on multiple units at the same time, they must all run
the same charm. Trying, for example, `juju-verify shutdown nova-compute/1
ceph-osd/0` will result in error.

## How to contribute

Is your favorite charm missing from the list of supported charm? Don't hesitate
to add it. This plugin is easily extensible.

All you need to do is create new class in `juju_verify.verifiers` package that
inherits from `juju_verify.verifiers.BaseVerifier` (see the class documentation for
more details) and implement the necessary logic.

Then, the charm name needs to be added to `SUPPORTED_CHARMS` dictionary in
`juju_verify/verifiers/__init__.py` *et voil√†*, the charm is now supported.

Don't forget to add unit and functional tests, and run:

```bash
make test
```

## Submit a bug

If you prefer, file a bug or feature request at:

* https://bugs.launchpad.net/juju-verify

## TODO

* Check if machine runs other principal unties aside from those that are being
  checked

* Allow targeting Juju machines, not just units for checks. e.g.
  `juju-verify shutdown --machine 0`


