

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>API Reference &mdash; turberfield-dialogue 0.30.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/turberfield.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Publishing" href="publishing.html" />
    <link rel="prev" title="CLI Reference" href="cli.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> turberfield-dialogue
          

          
          </a>

          
            
            
              <div class="version">
                0.30.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="battle.html">Example 1: Battle Royal</a></li>
<li class="toctree-l1"><a class="reference internal" href="syntax.html">Syntax guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="cloak.html">Example 2: Cloak of Darkness</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">CLI Reference</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#folders">Folders</a></li>
<li class="toctree-l2"><a class="reference internal" href="#scene-scripts">Scene scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#events">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="#interludes">Interludes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#handler">Handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="#matcher">Matcher</a></li>
<li class="toctree-l2"><a class="reference internal" href="#performer">Performer</a></li>
<li class="toctree-l2"><a class="reference internal" href="#player">Player</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="publishing.html">Publishing</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing.html">Performing</a></li>
<li class="toctree-l1"><a class="reference internal" href="changes.html">Change Log</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">turberfield-dialogue</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>API Reference</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/api.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="api-reference">
<h1>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h1>
<p>This API lets you customise the rehearsal of
a <a class="reference internal" href="#turberfield.dialogue.model.SceneScript.Folder" title="turberfield.dialogue.model.SceneScript.Folder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Folder</span></code></a>
of Turberfield dialogue. You can modify how this performance is presented
in your game by customising or replacing a <a class="reference internal" href="#handler">handler</a> function which processes
<a class="reference internal" href="#events">events</a> from the scene script files.</p>
<p>If you need to integrate with a game event loop, then create a
<a class="reference internal" href="#turberfield.dialogue.performer.Performer" title="turberfield.dialogue.performer.Performer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Performer</span></code></a> object instead.
This separates event generation from sequencing.</p>
<p>The <a class="reference internal" href="#scene-scripts">scene scripts</a> themselves also have an API, allowing you to interact with
the process by which entities are selected and cast to roles.</p>
<p>There is also a simple <a class="reference internal" href="#turberfield.dialogue.matcher.Matcher" title="turberfield.dialogue.matcher.Matcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">Matcher</span></code></a> class
which you can use to compare folder metadata.</p>
<div class="section" id="folders">
<h2>Folders<a class="headerlink" href="#folders" title="Permalink to this headline">¶</a></h2>
<dl class="py attribute">
<dt id="turberfield.dialogue.model.SceneScript.Folder">
<code class="sig-prename descclassname">SceneScript.</code><code class="sig-name descname">Folder</code><em class="property"> (pkg, description, metadata, paths, interludes)</em><a class="headerlink" href="#turberfield.dialogue.model.SceneScript.Folder" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pkg</strong> – <p>The dotted (importable) name of the package which
installs the scene script folder.</p>
<p>Absent proper packaging, you must set this parameter to
<cite>__name__</cite>. The Python module which declares the folder will
act as the anchor location for scene files, and all
referencing paths will need to be made relative to the
module.</p>
</p></li>
<li><p><strong>description</strong> (<em>str</em>) – A free text description of the contents
of the folder.</p></li>
<li><p><strong>metadata</strong> – <p>An optional sequence or mapping containing
application-specific metadata.</p>
<p>This parameter is for the purposes of searching or filtering
collections of folders against particular criteria.</p>
</p></li>
<li><p><strong>paths</strong> – <p>A list of strings, each of which is the path to a
scene script file relative to the object declared in the
parameter <strong>pkg</strong>.</p>
<p>Path separator is always “<strong>/</strong>” notwithstanding the local
Operating System.</p>
</p></li>
<li><p><strong>interludes</strong> – <p>A sequence of function objects.
The sequence should be such as to provide one object for
each of the scene script files declared in the parameter
<strong>paths</strong>.</p>
<p>A function object will be called when its corresponding
scene script file has been performed.</p>
<p>See <a class="reference internal" href="#interludes">Interludes</a> for the required signature of an interlude
function object.</p>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="scene-scripts">
<h2>Scene scripts<a class="headerlink" href="#scene-scripts" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="turberfield.dialogue.model.SceneScript">
<em class="property">class </em><code class="sig-prename descclassname">turberfield.dialogue.model.</code><code class="sig-name descname">SceneScript</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fP</span></em>, <em class="sig-param"><span class="n">metadata</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">doc</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/turberfield/dialogue/model.html#SceneScript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#turberfield.dialogue.model.SceneScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Gives access to a Turberfield scene script (.rst) file.</p>
<p>This class allows discovery and classification of scene files prior to loading
them in memory.</p>
<p>Once loaded, it allows entity selection based on the role definitions in the file.
Casting a selection permits the script to be iterated as a sequence of dialogue items.</p>
<dl class="py method">
<dt id="turberfield.dialogue.model.SceneScript.scripts">
<em class="property">classmethod </em><code class="sig-name descname">scripts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pkg</span></em>, <em class="sig-param"><span class="n">metadata</span></em>, <em class="sig-param"><span class="n">paths</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/turberfield/dialogue/model.html#SceneScript.scripts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#turberfield.dialogue.model.SceneScript.scripts" title="Permalink to this definition">¶</a></dt>
<dd><p>This class method is the preferred way to create SceneScript objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pkg</strong> (<em>str</em>) – The dotted name of the package containing the scripts.</p></li>
<li><p><strong>metadata</strong> – A mapping or data object. This parameter permits searching among
scripts against particular criteria. Its use is application specific.</p></li>
<li><p><strong>paths</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) – A sequence of file paths to the scripts relative to the package.</p></li>
</ul>
</dd>
</dl>
<p>You can satisfy all parameter requirements by passing in a
<a class="reference internal" href="#turberfield.dialogue.model.SceneScript.Folder" title="turberfield.dialogue.model.SceneScript.Folder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Folder</span></code></a> object
like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SceneScript</span><span class="o">.</span><span class="n">scripts</span><span class="p">(</span><span class="o">**</span><span class="n">folder</span><span class="o">.</span><span class="n">_asdict</span><span class="p">())</span>
</pre></div>
</div>
<p>The method generates a sequence of
<a class="reference internal" href="#turberfield.dialogue.model.SceneScript" title="turberfield.dialogue.model.SceneScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">SceneScript</span></code></a> objects.</p>
</dd></dl>

<dl class="py method">
<dt id="turberfield.dialogue.model.SceneScript.read">
<em class="property">static </em><code class="sig-name descname">read</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/turberfield/dialogue/model.html#SceneScript.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#turberfield.dialogue.model.SceneScript.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a block of text as a docutils document.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>text</strong> (<em>str</em>) – Scene script text.</p></li>
<li><p><strong>name</strong> (<em>str</em>) – An optional name for the document.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A document object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="turberfield.dialogue.model.SceneScript.select">
<code class="sig-name descname">select</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">personae</span></em>, <em class="sig-param"><span class="n">relative</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">roles</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/turberfield/dialogue/model.html#SceneScript.select"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#turberfield.dialogue.model.SceneScript.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Select a persona for each entity declared in the scene.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>personae</strong> – A sequence of Personae.</p></li>
<li><p><strong>relative</strong> (<em>bool</em>) – Affects imports from namespace packages.
Used for testing only.</p></li>
<li><p><strong>roles</strong> (<em>int</em>) – The maximum number of roles allocated to each persona.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An OrderedDict of {Entity: Persona}.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="turberfield.dialogue.model.SceneScript.cast">
<code class="sig-name descname">cast</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mapping</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/turberfield/dialogue/model.html#SceneScript.cast"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#turberfield.dialogue.model.SceneScript.cast" title="Permalink to this definition">¶</a></dt>
<dd><p>Allocate the scene script a cast of personae for each of its entities.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mapping</strong> – A dictionary of {Entity, Persona}</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The SceneScript object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="turberfield.dialogue.model.SceneScript.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/turberfield/dialogue/model.html#SceneScript.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#turberfield.dialogue.model.SceneScript.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the script file.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#turberfield.dialogue.model.Model" title="turberfield.dialogue.model.Model"><code class="xref py py-class docutils literal notranslate"><span class="pre">Model</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="events">
<h2>Events<a class="headerlink" href="#events" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="turberfield.dialogue.model.Model">
<em class="property">class </em><code class="sig-prename descclassname">turberfield.dialogue.model.</code><code class="sig-name descname">Model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fP</span></em>, <em class="sig-param"><span class="n">document</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/turberfield/dialogue/model.html#Model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#turberfield.dialogue.model.Model" title="Permalink to this definition">¶</a></dt>
<dd><p>This class registers the necessary extensions to the docutils document model.</p>
<p>It also defines the types which are returned on iterating over a scene script file.</p>
</dd></dl>

<dl class="py attribute">
<dt id="turberfield.dialogue.model.Model.Shot">
<code class="sig-prename descclassname">Model.</code><code class="sig-name descname">Shot</code><em class="property"> (name, scene, items)</em><a class="headerlink" href="#turberfield.dialogue.model.Model.Shot" title="Permalink to this definition">¶</a></dt>
<dd><p>An event which signals the beginning of a shot in a scene.</p>
</dd></dl>

<dl class="py attribute">
<dt id="turberfield.dialogue.model.Model.Property">
<code class="sig-prename descclassname">Model.</code><code class="sig-name descname">Property</code><em class="property"> (entity, object, attr, val)</em><a class="headerlink" href="#turberfield.dialogue.model.Model.Property" title="Permalink to this definition">¶</a></dt>
<dd><p>An event which signals a property is to be accessed.</p>
</dd></dl>

<dl class="py attribute">
<dt id="turberfield.dialogue.model.Model.Audio">
<code class="sig-prename descclassname">Model.</code><code class="sig-name descname">Audio</code><em class="property"> (package, resource, offset, duration, loop)</em><a class="headerlink" href="#turberfield.dialogue.model.Model.Audio" title="Permalink to this definition">¶</a></dt>
<dd><p>An event which signals an audio cue.</p>
</dd></dl>

<dl class="py attribute">
<dt id="turberfield.dialogue.model.Model.Still">
<code class="sig-prename descclassname">Model.</code><code class="sig-name descname">Still</code><em class="property"> (package, resource, offset, duration, loop, label)</em><a class="headerlink" href="#turberfield.dialogue.model.Model.Still" title="Permalink to this definition">¶</a></dt>
<dd><p>An event which signals a still image cue.</p>
</dd></dl>

<dl class="py attribute">
<dt id="turberfield.dialogue.model.Model.Memory">
<code class="sig-prename descclassname">Model.</code><code class="sig-name descname">Memory</code><em class="property"> (subject, object, state, text, html)</em><a class="headerlink" href="#turberfield.dialogue.model.Model.Memory" title="Permalink to this definition">¶</a></dt>
<dd><p>An event which signals a memory directive.</p>
</dd></dl>

<dl class="py attribute">
<dt id="turberfield.dialogue.model.Model.Line">
<code class="sig-prename descclassname">Model.</code><code class="sig-name descname">Line</code><em class="property"> (persona, text, html)</em><a class="headerlink" href="#turberfield.dialogue.model.Model.Line" title="Permalink to this definition">¶</a></dt>
<dd><p>An event which signals a line of dialogue.</p>
</dd></dl>

<dl class="py attribute">
<dt id="turberfield.dialogue.model.Model.Condition">
<code class="sig-prename descclassname">Model.</code><code class="sig-name descname">Condition</code><em class="property"> (object, attr, val, operator)</em><a class="headerlink" href="#turberfield.dialogue.model.Model.Condition" title="Permalink to this definition">¶</a></dt>
<dd><p>An event which evaluates a conditional expression.</p>
</dd></dl>

</div>
<div class="section" id="interludes">
<h2>Interludes<a class="headerlink" href="#interludes" title="Permalink to this headline">¶</a></h2>
<p>An interlude is a callable object (either a function, an instance
method or a Python object with a callable interface).</p>
<p>It is called by a handler at the end of the performance of a scene script file.
That is the <cite>current scene</cite> file as referred to below.</p>
<p>Here is an example to show the signature of parameters required.</p>
<dl class="py function">
<dt>
<code class="sig-name descname">def my_interlude(folder, index, ensemble, log=None, loop=None):</code></dt>
<dd><dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>folder</strong> – A <a class="reference internal" href="#turberfield.dialogue.model.SceneScript.Folder" title="turberfield.dialogue.model.SceneScript.Folder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Folder</span></code></a> object.</p></li>
<li><p><strong>index</strong> (<em>int</em>) – The index position into <strong>folder.paths</strong> of the current
scene script file.</p></li>
<li><p><strong>ensemble</strong> – A sequence of Python objects. It is guaranteed to contain
all the objects cast to roles in the current scene. It will be used to
select entities for the next.</p></li>
<li><p><strong>log</strong> – If supplied, this will be a <code class="docutils literal notranslate"><span class="pre">logging.Logger</span></code> object which
should be used in preference over any other for logging messages from within
your interlude function.</p></li>
<li><p><strong>loop</strong> – If supplied, this will be an instance of <code class="docutils literal notranslate"><span class="pre">asyncio.BaseEventLoop</span></code>.
That will signal to your function that it operates in an asynchronous
environment and that no blocking function should be called within it.</p></li>
</ul>
</dd>
<dt class="field-even">Returntype</dt>
<dd class="field-even"><p>dict</p>
<p>Returning this object gives you the option to control branching of
your narrative.</p>
<p>The dictionary data you pass back is matched against the metadata of
each folder. The folder whose metadata matches closest is the next
folder to run.</p>
<p>Return <strong>None</strong> to stop the performance.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="handler">
<h2>Handler<a class="headerlink" href="#handler" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="turberfield.dialogue.handlers.TerminalHandler">
<em class="property">class </em><code class="sig-prename descclassname">turberfield.dialogue.handlers.</code><code class="sig-name descname">TerminalHandler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">terminal</span></em>, <em class="sig-param"><span class="n">dbPath</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">pause</span><span class="o">=</span><span class="default_value">1.2</span></em>, <em class="sig-param"><span class="n">dwell</span><span class="o">=</span><span class="default_value">0.3</span></em>, <em class="sig-param"><span class="n">log</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/turberfield/dialogue/handlers.html#TerminalHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#turberfield.dialogue.handlers.TerminalHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>The default handler for events from scene script files.
It generates output for a console terminal.</p>
<p>The class is written to be a callable, stateful object.
Its <cite>__call__</cite> method delegates to handlers specific to each type of event.
You can subclass it and override those methods to suit your own application.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>terminal</strong> – A stream object.</p></li>
<li><p><strong>dbPath</strong> (<em>str</em>) – An optional URL to the internal database.</p></li>
<li><p><strong>pause</strong> (<em>float</em>) – The time in seconds to pause on a line of dialogue.</p></li>
<li><p><strong>dwell</strong> (<em>float</em>) – The time in seconds to dwell on a word of dialogue.</p></li>
<li><p><strong>log</strong> – An optional log object.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="turberfield.dialogue.handlers.TerminalHandler.handle_audio">
<em class="property">static </em><code class="sig-name descname">handle_audio</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span></em>, <em class="sig-param"><span class="n">wait</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/turberfield/dialogue/handlers.html#TerminalHandler.handle_audio"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#turberfield.dialogue.handlers.TerminalHandler.handle_audio" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle an audio event.</p>
<p>This function plays an audio file.
Currently only <cite>.wav</cite> format is supported.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – An <a class="reference internal" href="#turberfield.dialogue.model.Model.Audio" title="turberfield.dialogue.model.Model.Audio"><code class="xref py py-class docutils literal notranslate"><span class="pre">Audio</span></code></a>
object.</p></li>
<li><p><strong>wait</strong> (<em>bool</em>) – Force a blocking wait until playback is complete.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The supplied object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="turberfield.dialogue.handlers.TerminalHandler.handle_interlude">
<code class="sig-name descname">handle_interlude</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span></em>, <em class="sig-param"><span class="n">folder</span></em>, <em class="sig-param"><span class="n">index</span></em>, <em class="sig-param"><span class="n">ensemble</span></em>, <em class="sig-param"><span class="n">loop</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/turberfield/dialogue/handlers.html#TerminalHandler.handle_interlude"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#turberfield.dialogue.handlers.TerminalHandler.handle_interlude" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle an interlude event.</p>
<p>Interlude functions permit branching. They return a folder which the
application can choose to adopt as the next supplier of dialogue.</p>
<p>This handler calls the interlude with the supplied arguments and
returns the result.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – A callable object.</p></li>
<li><p><strong>folder</strong> – A
<a class="reference internal" href="#turberfield.dialogue.model.SceneScript.Folder" title="turberfield.dialogue.model.SceneScript.Folder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Folder</span></code></a> object.</p></li>
<li><p><strong>index</strong> (<em>int</em>) – Indicates which scene script in the folder
is being processed.</p></li>
<li><p><strong>ensemble</strong> – A sequence of Python objects.</p></li>
<li><p><strong>branches</strong> – A sequence of
<a class="reference internal" href="#turberfield.dialogue.model.SceneScript.Folder" title="turberfield.dialogue.model.SceneScript.Folder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Folder</span></code></a> objects.
from which to pick a branch in the action.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="#turberfield.dialogue.model.SceneScript.Folder" title="turberfield.dialogue.model.SceneScript.Folder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Folder</span></code></a>
object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="turberfield.dialogue.handlers.TerminalHandler.handle_line">
<code class="sig-name descname">handle_line</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/turberfield/dialogue/handlers.html#TerminalHandler.handle_line"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#turberfield.dialogue.handlers.TerminalHandler.handle_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle a line event.</p>
<p>This function displays a line of dialogue. It generates a blocking wait
for a period of time calculated from the length of the line.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obj</strong> – A <a class="reference internal" href="#turberfield.dialogue.model.Model.Line" title="turberfield.dialogue.model.Model.Line"><code class="xref py py-class docutils literal notranslate"><span class="pre">Line</span></code></a> object.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The supplied object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="turberfield.dialogue.handlers.TerminalHandler.handle_memory">
<code class="sig-name descname">handle_memory</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/turberfield/dialogue/handlers.html#TerminalHandler.handle_memory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#turberfield.dialogue.handlers.TerminalHandler.handle_memory" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle a memory event.</p>
<p>This function accesses the internal database. It writes a record
containing state information and an optional note.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obj</strong> – A <a class="reference internal" href="#turberfield.dialogue.model.Model.Memory" title="turberfield.dialogue.model.Model.Memory"><code class="xref py py-class docutils literal notranslate"><span class="pre">Memory</span></code></a>
object.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The supplied object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="turberfield.dialogue.handlers.TerminalHandler.handle_property">
<code class="sig-name descname">handle_property</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/turberfield/dialogue/handlers.html#TerminalHandler.handle_property"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#turberfield.dialogue.handlers.TerminalHandler.handle_property" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle a property event.</p>
<p>This function will set an attribute on an object if the event requires
it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obj</strong> – A <a class="reference internal" href="#turberfield.dialogue.model.Model.Property" title="turberfield.dialogue.model.Model.Property"><code class="xref py py-class docutils literal notranslate"><span class="pre">Property</span></code></a>
object.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The supplied object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="turberfield.dialogue.handlers.TerminalHandler.handle_scene">
<code class="sig-name descname">handle_scene</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/turberfield/dialogue/handlers.html#TerminalHandler.handle_scene"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#turberfield.dialogue.handlers.TerminalHandler.handle_scene" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle a scene event.</p>
<p>This function applies a blocking wait at the start of a scene.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obj</strong> – A <a class="reference internal" href="#turberfield.dialogue.model.Model.Shot" title="turberfield.dialogue.model.Model.Shot"><code class="xref py py-class docutils literal notranslate"><span class="pre">Shot</span></code></a>
object.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The supplied object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="turberfield.dialogue.handlers.TerminalHandler.handle_scenescript">
<code class="sig-name descname">handle_scenescript</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/turberfield/dialogue/handlers.html#TerminalHandler.handle_scenescript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#turberfield.dialogue.handlers.TerminalHandler.handle_scenescript" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle a scene script event.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obj</strong> – A <a class="reference internal" href="#turberfield.dialogue.model.SceneScript.Folder" title="turberfield.dialogue.model.SceneScript.Folder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Folder</span></code></a>
object.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The supplied object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="turberfield.dialogue.handlers.TerminalHandler.handle_shot">
<code class="sig-name descname">handle_shot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/turberfield/dialogue/handlers.html#TerminalHandler.handle_shot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#turberfield.dialogue.handlers.TerminalHandler.handle_shot" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle a shot event.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obj</strong> – A <a class="reference internal" href="#turberfield.dialogue.model.Model.Shot" title="turberfield.dialogue.model.Model.Shot"><code class="xref py py-class docutils literal notranslate"><span class="pre">Shot</span></code></a> object.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The supplied object.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="matcher">
<h2>Matcher<a class="headerlink" href="#matcher" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="turberfield.dialogue.matcher.Matcher">
<em class="property">class </em><code class="sig-prename descclassname">turberfield.dialogue.matcher.</code><code class="sig-name descname">Matcher</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">folders</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/turberfield/dialogue/matcher.html#Matcher"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#turberfield.dialogue.matcher.Matcher" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="turberfield.dialogue.matcher.Matcher.mapping_key">
<em class="property">static </em><code class="sig-name descname">mapping_key</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/turberfield/dialogue/matcher.html#Matcher.mapping_key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#turberfield.dialogue.matcher.Matcher.mapping_key" title="Permalink to this definition">¶</a></dt>
<dd><p>A keying function which allows nested objects to be sorted.</p>
</dd></dl>

<dl class="py method">
<dt id="turberfield.dialogue.matcher.Matcher.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">folders</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/turberfield/dialogue/matcher.html#Matcher.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#turberfield.dialogue.matcher.Matcher.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Match Turberfield Folders by their metadata.</p>
<p>This class has methods to normalise arbitrary dictionaries.
It provides a search API, so you can discover which folders are a metadata
match.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>folders</strong> – A sequence of
<a class="reference internal" href="#turberfield.dialogue.model.SceneScript.Folder" title="turberfield.dialogue.model.SceneScript.Folder"><code class="xref py py-class docutils literal notranslate"><span class="pre">turberfield.dialogue.model.SceneScript.Folder</span></code></a> objects.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="turberfield.dialogue.matcher.Matcher.options">
<code class="sig-name descname">options</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/turberfield/dialogue/matcher.html#Matcher.options"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#turberfield.dialogue.matcher.Matcher.options" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate folders to best match metadata.</p>
<p>The results will be a single, perfectly matched folder, or the two nearest
neighbours of an imperfect match.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>dict</em>) – metadata matching criteria.</p>
</dd>
</dl>
<p>This method is a generator. It yields
<a class="reference internal" href="#turberfield.dialogue.model.SceneScript.Folder" title="turberfield.dialogue.model.SceneScript.Folder"><code class="xref py py-class docutils literal notranslate"><span class="pre">turberfield.dialogue.model.SceneScript.Folder</span></code></a> objects.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="performer">
<h2>Performer<a class="headerlink" href="#performer" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="turberfield.dialogue.performer.Performer">
<em class="property">class </em><code class="sig-prename descclassname">turberfield.dialogue.performer.</code><code class="sig-name descname">Performer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">folders</span></em>, <em class="sig-param"><span class="n">ensemble</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/turberfield/dialogue/performer.html#Performer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#turberfield.dialogue.performer.Performer" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="turberfield.dialogue.performer.Performer.stopped">
<em class="property">property </em><code class="sig-name descname">stopped</code><a class="headerlink" href="#turberfield.dialogue.performer.Performer.stopped" title="Permalink to this definition">¶</a></dt>
<dd><p>Is <cite>True</cite> when none of the folders can be cast, <cite>False</cite> otherwise.</p>
</dd></dl>

<dl class="py method">
<dt id="turberfield.dialogue.performer.Performer.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">folders</span></em>, <em class="sig-param"><span class="n">ensemble</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/turberfield/dialogue/performer.html#Performer.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#turberfield.dialogue.performer.Performer.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>An object which can select actors for a scene and run a performance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>folders</strong> – A sequence of
<a class="reference internal" href="#turberfield.dialogue.model.SceneScript.Folder" title="turberfield.dialogue.model.SceneScript.Folder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Folder</span></code></a> objects.</p></li>
<li><p><strong>ensemble</strong> – A sequence of Python objects.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="turberfield.dialogue.performer.Performer.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">react</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">strict</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">roles</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/turberfield/dialogue/performer.html#Performer.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#turberfield.dialogue.performer.Performer.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Select a cast and perform the next scene.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>react</strong> (<em>bool</em>) – If <cite>True</cite>, then Property directives are executed
at the point they are encountered. Pass <cite>False</cite> to skip them
so they can be enacted later on.</p></li>
<li><p><strong>strict</strong> (<em>bool</em>) – Only fully-cast scripts to be performed.</p></li>
<li><p><strong>roles</strong> (<em>int</em>) – Maximum number of roles permitted each character.</p></li>
</ul>
</dd>
</dl>
<p>This method is a generator. It yields events from the performance.</p>
<p>If a <a class="reference internal" href="#turberfield.dialogue.model.Model.Condition" title="turberfield.dialogue.model.Model.Condition"><code class="xref py py-class docutils literal notranslate"><span class="pre">Condition</span></code></a> is
encountered, it is evaluated. No events are generated while the most recent
condition is False.</p>
<p>A new <a class="reference internal" href="#turberfield.dialogue.model.Model.Shot" title="turberfield.dialogue.model.Model.Shot"><code class="xref py py-class docutils literal notranslate"><span class="pre">Shot</span></code></a> resets the
current condition.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="player">
<h2>Player<a class="headerlink" href="#player" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="turberfield.dialogue.player.rehearse">
<code class="sig-prename descclassname">turberfield.dialogue.player.</code><code class="sig-name descname">rehearse</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">folders</span></em>, <em class="sig-param"><span class="n">references</span></em>, <em class="sig-param"><span class="n">handler</span></em>, <em class="sig-param"><span class="n">repeat</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">roles</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">strict</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">loop</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/turberfield/dialogue/player.html#rehearse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#turberfield.dialogue.player.rehearse" title="Permalink to this definition">¶</a></dt>
<dd><p>Cast a set of objects into a sequence of scene scripts. Deliver the performance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>folders</strong> – A sequence of
<a class="reference internal" href="#turberfield.dialogue.model.SceneScript.Folder" title="turberfield.dialogue.model.SceneScript.Folder"><code class="xref py py-class docutils literal notranslate"><span class="pre">turberfield.dialogue.model.SceneScript.Folder</span></code></a> objects.</p></li>
<li><p><strong>references</strong> – A sequence of Python objects.</p></li>
<li><p><strong>handler</strong> – A callable object. This will be invoked with every event from the
performance.</p></li>
<li><p><strong>repeat</strong> (<em>int</em>) – Extra repetitions of each folder.</p></li>
<li><p><strong>roles</strong> (<em>int</em>) – Maximum number of roles permitted each character.</p></li>
<li><p><strong>strict</strong> (<em>bool</em>) – Only fully-cast scripts to be performed.</p></li>
</ul>
</dd>
</dl>
<p>This function is a generator. It yields events from the performance.</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="publishing.html" class="btn btn-neutral float-right" title="Publishing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="cli.html" class="btn btn-neutral float-left" title="CLI Reference" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2017, D Haynes

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>