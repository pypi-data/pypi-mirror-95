

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Publishing &mdash; turberfield-dialogue 0.30.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/turberfield.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Performing" href="performing.html" />
    <link rel="prev" title="API Reference" href="api.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> turberfield-dialogue
          

          
          </a>

          
            
            
              <div class="version">
                0.30.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="battle.html">Example 1: Battle Royal</a></li>
<li class="toctree-l1"><a class="reference internal" href="syntax.html">Syntax guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="cloak.html">Example 2: Cloak of Darkness</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">CLI Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Publishing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#checklist">Checklist</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#organise-your-project-directory">Organise your project directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="#make-a-manifest">Make a manifest</a></li>
<li class="toctree-l3"><a class="reference internal" href="#write-a-readme-file">Write a README file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#write-the-setup-py">Write the setup.py</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#versioning">Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="#attribution">Attribution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#distribution">Distribution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installability">Installability</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dependency-management">Dependency management</a></li>
<li class="toctree-l2"><a class="reference internal" href="#discoverability">Discoverability</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="performing.html">Performing</a></li>
<li class="toctree-l1"><a class="reference internal" href="changes.html">Change Log</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">turberfield-dialogue</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Publishing</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/publishing.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="publishing">
<span id="id1"></span><h1>Publishing<a class="headerlink" href="#publishing" title="Permalink to this headline">¶</a></h1>
<p>The demo examples you’ve seen so far were arranged as standalone
directories containing a Python module and some scene script files.</p>
<p>You can get started quickly by working this way, but before your
screenplay is ready, you need to have properly configured it as
a Python package.</p>
<p>Packaging gives you the following advantages:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#versioning">Versioning</a></p></li>
<li><p><a class="reference internal" href="#attribution">Attribution</a></p></li>
<li><p><a class="reference internal" href="#distribution">Distribution</a></p></li>
<li><p><a class="reference internal" href="#installability">Installability</a></p></li>
<li><p><a class="reference internal" href="#dependency-management">Dependency management</a></p></li>
<li><p><a class="reference internal" href="#discoverability">Discoverability</a></p></li>
</ul>
<div class="section" id="checklist">
<h2>Checklist<a class="headerlink" href="#checklist" title="Permalink to this headline">¶</a></h2>
<p>Turning your screenplay into a package might be a pain the first time
you do it. But you’ll reap the benefits after that. Here’s what you have
to do.</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#organise-your-project-directory">Organise your project directory</a></p></li>
<li><p><a class="reference internal" href="#make-a-manifest">Make a manifest</a></p></li>
<li><p><a class="reference internal" href="#write-a-readme-file">Write a README file</a></p></li>
<li><p><a class="reference internal" href="#write-the-setup-py">Write the setup.py</a></p></li>
</ol>
<div class="section" id="organise-your-project-directory">
<h3>Organise your project directory<a class="headerlink" href="#organise-your-project-directory" title="Permalink to this headline">¶</a></h3>
<p>Suppose your screenplay, <strong>mydrama</strong> is in a single directory of that name.
You have three scene script files; <cite>begin.rst</cite>, <cite>middle.rst</cite>, and <cite>end.rst</cite>.
You have an idea for a soundtrack you call <cite>theme.wav</cite>. And there is one
Python module called <cite>logic.py</cite>. You have saved some options as a file
called <cite>rehearse.cli</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>mydrama
├── begin.rst
├── middle.rst
├── end.rst
├── theme.wav
├── logic.py
└── rehearse.cli
</pre></div>
</div>
<p>Now create four more empty files as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>├── __init__.py
├── MANIFEST.in
├── README.rst
└── setup.py
</pre></div>
</div>
<p>There is nothing more to do to <cite>__init__.py</cite>. It stays empty. We will deal
with the other three in turn.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The naming conventions for Python packages are quite strict. Your directory
name should use only lower case letters. If you want to signify a space in
the directory name, use an underscore.</p>
<p>Also, <strong>never use the word ‘turberfield’ in your package name</strong>.
It’s for software tooling only.</p>
</div>
</div>
<div class="section" id="make-a-manifest">
<h3>Make a manifest<a class="headerlink" href="#make-a-manifest" title="Permalink to this headline">¶</a></h3>
<p>The <cite>MANIFEST.in</cite> file decides which of your source files get
installed. It can filter out any project files created by your text
editor, cache files and the like. It should look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">recursive</span><span class="o">-</span><span class="n">include</span> <span class="o">.</span> <span class="o">*.</span><span class="n">cli</span>
<span class="n">recursive</span><span class="o">-</span><span class="n">include</span> <span class="o">.</span> <span class="o">*.</span><span class="n">rst</span>
<span class="n">recursive</span><span class="o">-</span><span class="n">include</span> <span class="o">.</span> <span class="o">*.</span><span class="n">wav</span>
</pre></div>
</div>
</div>
<div class="section" id="write-a-readme-file">
<h3>Write a README file<a class="headerlink" href="#write-a-readme-file" title="Permalink to this headline">¶</a></h3>
<p>The <cite>README.rst</cite> file is an opportunity to describe your drama to
potential collaborators. It is a <a class="reference external" href="http://docutils.sourceforge.net/docs/user/rst/quickref.html">reStructuredText</a> file, so you can include
hyperlinks and other useful structures.</p>
<p>At a minimum, this file should contain your name, email address and
an assertion of your copyright. Other details are up to you.</p>
</div>
<div class="section" id="write-the-setup-py">
<h3>Write the setup.py<a class="headerlink" href="#write-the-setup-py" title="Permalink to this headline">¶</a></h3>
<p><cite>setup.py</cite> is like an electronic form which tells the packaging system
everything about your project. Here is the standard boilerplate you should use.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># encoding: UTF-8</span>

<span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span>
<span class="kn">import</span> <span class="nn">os.path</span>

<span class="vm">__doc__</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span>
    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span> <span class="s2">&quot;README.rst&quot;</span><span class="p">),</span>
    <span class="s2">&quot;r&quot;</span>
<span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;mydrama&quot;</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="s2">&quot;0.1.0&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A dramatic screenplay&quot;</span><span class="p">,</span>
    <span class="n">author</span><span class="o">=</span><span class="s2">&quot;Ernest Scribbler&quot;</span><span class="p">,</span>
    <span class="n">author_email</span><span class="o">=</span><span class="s2">&quot;escribbler@zmail.com&quot;</span><span class="p">,</span>
    <span class="n">url</span><span class="o">=</span><span class="s2">&quot;http://pypi.python.org/pypi/mydrama&quot;</span><span class="p">,</span>
    <span class="n">long_description</span><span class="o">=</span><span class="vm">__doc__</span><span class="p">,</span>
    <span class="n">classifiers</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;Framework :: Turberfield&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Operating System :: OS Independent&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Programming Language :: Python :: 3&quot;</span><span class="p">,</span>
        <span class="s2">&quot;License :: Other/Proprietary License&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">packages</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;mydrama&quot;</span><span class="p">],</span>
    <span class="n">package_dir</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;mydrama&quot;</span><span class="p">:</span> <span class="s2">&quot;.&quot;</span><span class="p">},</span>
    <span class="n">include_package_data</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">install_requires</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;turberfield-dialogue&quot;</span><span class="p">],</span>
    <span class="n">zip_safe</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">entry_points</span><span class="o">=</span><span class="p">{}</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Of course, you’ll need to alter some details to match the name of your
particular project, here:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;mydrama&quot;</span><span class="p">,</span>
</pre></div>
</div>
<p>… and here:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">packages</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;mydrama&quot;</span><span class="p">],</span>
<span class="n">package_dir</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;mydrama&quot;</span><span class="p">:</span> <span class="s2">&quot;.&quot;</span><span class="p">},</span>
</pre></div>
</div>
<p>In the next few sections, we’ll customise a little further.</p>
</div>
</div>
<div class="section" id="versioning">
<h2>Versioning<a class="headerlink" href="#versioning" title="Permalink to this headline">¶</a></h2>
<p>As soon as other people begin to use your dialogue, you’ll need to give
them a way of deciding whether they want to use your latest rewrite or
to stick with an earlier revision. Every release of your work will have a
version number to identify it.</p>
<p>You declare the version in the <cite>setup</cite> parameters in <cite>setup.py</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">version</span><span class="o">=</span><span class="s2">&quot;0.1.0&quot;</span><span class="p">,</span>
</pre></div>
</div>
<p>The three digits reflect the significance of any new change:</p>
<blockquote>
<div><ul class="simple">
<li><p>Trivial fixes increment the rightmost digit.</p></li>
<li><p>Significant changes increment the middle version field. This is the
most frequent case; the number can go as high as you like, even into
the hundreds.</p></li>
<li><p>Major changes which are incompatible with previous versions require
an increment to the leftmost digit.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="attribution">
<h2>Attribution<a class="headerlink" href="#attribution" title="Permalink to this headline">¶</a></h2>
<p>I’m guessing your name is not Ernest Scribbler. If it is, write in
and let me know! Otherwise, you’ll change the following parameters to match
your online identity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">author</span><span class="o">=</span><span class="s2">&quot;Ernest Scribbler&quot;</span><span class="p">,</span>
<span class="n">author_email</span><span class="o">=</span><span class="s2">&quot;escribbler@zmail.com&quot;</span><span class="p">,</span>
</pre></div>
</div>
</div>
<div class="section" id="distribution">
<h2>Distribution<a class="headerlink" href="#distribution" title="Permalink to this headline">¶</a></h2>
<p>The command to create a <cite>distribution</cite> of your project is this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">~</span><span class="n">py3</span><span class="o">.</span><span class="mi">5</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">sdist</span>
</pre></div>
</div>
<p>The packaging system creates an installable for you. You’ll find
it at <cite>dist/mydrama-0.1.0.tar.gz</cite> or <cite>dist/mydrama-0.1.0.zip</cite>,
depending on your OS.</p>
<p>You can upload that file to a package repository. The most popular is
<a class="reference external" href="https://pypi.python.org/pypi">PyPI</a> but there are alternatives, such as <a class="reference external" href="https://gemfury.com">Gemfury</a>.</p>
<p>So you’ll need to declare the correct URL to your package once
it gets up there:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">url</span><span class="o">=</span><span class="s2">&quot;http://pypi.python.org/pypi/mydrama&quot;</span><span class="p">,</span>
</pre></div>
</div>
<p>This is a bit of a chicken-and-egg situation of course. You’ll have to
anticipate what the URL is going to be before you upload it, or
else you’ll have a misprint in the first release which you’ll need to fix
afterwards.</p>
</div>
<div class="section" id="installability">
<h2>Installability<a class="headerlink" href="#installability" title="Permalink to this headline">¶</a></h2>
<p>With your work properly packaged, you can be confident that others can
start using it with a minimum of fuss.</p>
<p>If you upload it to <a class="reference external" href="https://pypi.python.org/pypi">PyPI</a>, <cite>pip</cite> will go out and fetch it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">~/</span><span class="n">py3</span><span class="o">.</span><span class="mi">5</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">pip</span> <span class="n">install</span> <span class="n">mydrama</span>
</pre></div>
</div>
<p>Or you could send your package file by email or on a USB stick. Then
the install command targets the package file like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">~/</span><span class="n">py3</span><span class="o">.</span><span class="mi">5</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">pip</span> <span class="n">install</span> <span class="n">mydrama</span><span class="o">-</span><span class="mf">0.1</span><span class="o">.</span><span class="mf">0.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
</pre></div>
</div>
</div>
<div class="section" id="dependency-management">
<h2>Dependency management<a class="headerlink" href="#dependency-management" title="Permalink to this headline">¶</a></h2>
<p>Your package gets to declare which other Python libraries it needs to run.
I already gave you the one essential dependency:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">install_requires</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;turberfield-dialogue&quot;</span><span class="p">],</span>
</pre></div>
</div>
<p>It’s quite possible that your <cite>logic.py</cite> might rely on some other
library to do a particular job. Perhaps you’ve written a role for a banker
who needs to <a class="reference external" href="https://pypi.python.org/pypi/tallywallet-common">calculate loan interest</a>.</p>
<p>Whatever <a class="reference external" href="https://pypi.python.org/pypi">PyPI</a> package you add to this list will be automatically installed
with your screenplay and available for use from your Python modules.</p>
</div>
<div class="section" id="discoverability">
<h2>Discoverability<a class="headerlink" href="#discoverability" title="Permalink to this headline">¶</a></h2>
<p>Publishing your work is a crucial step. But as well as that, you have to
advertise.  When a game developer puts out the call for some dramatic
dialogue, you want to be able to say,
‘Yes, there’s a scene for that. I wrote it. Here it is.’</p>
<p>So now you need to create a unique global id for the scene you just wrote.</p>
<p>Python helps you here. It has a standard module called <cite>uuid</cite>, which is
short for <cite>unique user id</cite>. Here’s how you use it to generate a one-time
code to identify a folder of scenes you just created:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">~/</span><span class="n">py3</span><span class="o">.</span><span class="mi">5</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">python</span> <span class="o">-</span><span class="n">c</span><span class="s2">&quot;import uuid; print(uuid.uuid4().hex)&quot;</span>
</pre></div>
</div>
<p>What you get back is a 32-character code which looks a bit like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="o">.</span><span class="mi">1</span><span class="n">de5c</span><span class="o">.</span><span class="mi">3</span><span class="n">f5a4abe</span><span class="o">..</span><span class="mf">937.7</span><span class="o">.</span><span class="mf">6e55</span><span class="n">a</span><span class="o">.</span><span class="mi">8</span><span class="n">e</span>
</pre></div>
</div>
<p>I put dots in it so you wouldn’t cheat and copy mine. Dots are illegal.
Make your own!</p>
<p>Now you go back to <cite>setup.py</cite> and edit the <cite>entry_points</cite> parameter.
Like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
    <span class="s2">&quot;turberfield.interfaces.folder&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;c.1de5c.3f5a4abe..937.7.6e55a.8e = mydrama.logic:folder&quot;</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">},</span>
</pre></div>
</div>
<p>Doing this advertises your folder so it can be discovered and used during
the course of a game.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="performing.html" class="btn btn-neutral float-right" title="Performing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="api.html" class="btn btn-neutral float-left" title="API Reference" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2017, D Haynes

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>