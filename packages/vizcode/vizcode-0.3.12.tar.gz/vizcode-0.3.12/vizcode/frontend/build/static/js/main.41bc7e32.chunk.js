(this["webpackJsonpcode-visualization-react"]=this["webpackJsonpcode-visualization-react"]||[]).push([[0],{262:function(e,t,o){},496:function(e,t,o){"use strict";o.r(t);var n=o(3),i=o(0),a=o.n(i),r=o(8),s=o.n(r),l=(o(262),o(136)),c=o(101),d=o.n(c),h=o(211),u=o(24),p=o(102),g=o(15),f=o(236),b=o(234),v=o(108),y=o(212),m=o.n(y),j=o(78),C=o.n(j),k=o(46),x=o.n(k),O=function e(){Object(u.a)(this,e)};O.connectedNodeColor="#a1c4ff",O.nodeColor="#D3D3D3",O.highlightedNodeColor="#448aff",O.backgroundColor="#ccc",O.edgeColor="#ccc",O.highlightedEdgeColor="#888",O.nodeColorNext="#2f60b2",O.nodeColorPrev="#a1c4ff",O.prevClickedNodeColor="#6a0dad",O.activeButtonBackgroundColor="#00ff00",O.activeButtonTextColor="#ffffff",O.disabledButtonBackgroundColor="#e0e0e0",O.disabledButtonTextColor="#000000",O.primaryColor="#34495e";var w=O,N=function e(){Object(u.a)(this,e)};N.homeSteps=[{target:".tour-logo",content:"Welcome to VizCode! This tutorial will help you understand how to use our tool. We highly encourage you to see the whole tutorial.",disableBeacon:!0},{target:".tour-file",content:"Here you can select whether you want to search for a function or a file from your codebase."},{target:".tour-search",content:"Here is our search tool. You can enter either a function or a file name."},{target:".tour-home",content:"You can click this button to go back to the home screen (where you are now) at any point."},{target:".tour-help",content:"You can hover over this button to see a brief overview of VizCode's functionality."},{target:".tour-toggle",content:"You can click this button to minimize the code window when it is open."},{target:".tour-start",content:"Now select a file or a function to see the corresponding graph."}],N.graphSteps=[{target:".tour-cytoscape",title:"General",content:"Below is the generated dependency graph. Nodes represent functions (circles) or files (diamonds). Edges represents directed relationships between the nodes.",disableBeacon:!0,placement:"center"},{target:".tour-cytoscape-click",title:"Clicks",content:"Click on a node to see its relationships and related code on the right side. Click on an edge to see how one node calls another node.",placement:"center"},{target:".tour-cytoscape-double-click",title:"Double clicks",content:"Double click on a function node (circle) to see what functions its connected to. Double click on a file node (diamond) to see what functions compose that file. Double click on an edge between two file nodes to see the functions that compose both files.",placement:"center"},{target:".codeWindow",title:"Code Window",content:"Here is the code window displaying the code from the node that you clicked on. If the node you clicked on is a function, then it will highlight the relevant code."},{target:".tour-minimize-code-window",title:"Toggle Code Window",content:"You can click this button to minimize the code window on the right side."},{target:".tour-graph-search",title:"Search Graph",content:"You can also search for other files or functions."},{target:".tour-cytoscape",title:"Thank you!",content:"Thank you for using VizCode! If you have any questions or comments contact us at founders@vizcode.dev",placement:"center"}];var S=N,T=function e(t,o){Object(u.a)(this,e),this.name=t,this.title=o.title;var n=o[this.name];void 0!==n&&(this.language=n.language,this.nodes=n.nodes,this.edges=n.edges)},E=o(213),F=o.n(E),z=o(214);function L(){var e=Object(z.a)(['\n  .prettyprint {\n    background: #1d1f21;\n    font-family: Menlo, "Bitstream Vera Sans Mono", "DejaVu Sans Mono", Monaco, Consolas, monospace;\n    border: 0 !important;\n    font-size: 12px;\n  }\n  .pln {\n    color: #c5c8c6;\n  }\n  ol.linenums {\n    margin-top: 0;\n    margin-bottom: 0;\n    color: #969896;\n  }\n  li.L0,\n  li.L1,\n  li.L2,\n  li.L3,\n  li.L4,\n  li.L5,\n  li.L6,\n  li.L7,\n  li.L8,\n  li.L9 {\n    padding-left: 1em;\n    background-color: #1d1f21;\n    list-style-type: decimal;\n  }\n  @media screen {\n    .str {\n        color: #b5bd68;\n    }\n    .kwd {\n        color: #b294bb;\n    }\n    .com {\n        color: #969896;\n    }\n    .typ {\n        color: #81a2be;\n    }\n    .lit {\n        color: #de935f;\n    }\n    .pun {\n        color: #c5c8c6;\n    }\n    .opn {\n        color: #c5c8c6;\n    }\n    .clo {\n        color: #c5c8c6;\n    }\n    .tag {\n        color: #cc6666;\n    }\n    .atn {\n        color: #de935f;\n    }\n    .atv {\n        color: #8abeb7;\n    }\n    /* declaration */\n    \n    .dec {\n        color: #de935f;\n    }\n    .var {\n        color: #cc6666;\n    }\n    .fun {\n        color: #81a2be;\n    }\n  }\n']);return L=function(){return e},e}var G=o(215).a.div(L()),D=o(219),W=o.n(D),P=o(237),H=o(532);var B=function(e){return Object(n.jsxs)(P.a,{variant:"outlined",style:{marginTop:"5px",paddingTop:"10px",paddingLeft:"20px",paddingRight:"20px",paddingBottom:"10px",maxWidth:"600px"},children:[Object(n.jsx)(H.a,{variant:"body1",style:{fontWeight:"bold"},display:"inline",children:"Name:"}),Object(n.jsxs)(H.a,{variant:"body2",display:"inline",children:[" ",e.name]}),Object(n.jsx)("br",{}),Object(n.jsx)(H.a,{variant:"body1",style:{fontWeight:"bold"},display:"inline",children:"Type:"}),Object(n.jsxs)(H.a,{variant:"body2",display:"inline",children:[" ",e.type]}),Object(n.jsx)("br",{}),"File"!=e.type&&Object(n.jsxs)("div",{children:[Object(n.jsx)(H.a,{variant:"body1",style:{fontWeight:"bold"},display:"inline",children:"File Path:"}),Object(n.jsxs)(H.a,{variant:"body2",display:"inline",children:[" ",e.filePath]}),Object(n.jsx)(H.a,{variant:"subtitle1",style:{fontWeight:"bold"},children:"Comment:"}),Object(n.jsx)(H.a,{variant:"body2",children:e.comment})]})]})};var I=function(e){var t;return"javascript"==e.language&&(t=Object(n.jsxs)("div",{children:[Object(n.jsx)(H.a,{variant:"subtitle1",style:{"font-weight":"bold"},display:"inline",children:"Props:"}),Object(n.jsxs)(H.a,{variant:"body2",display:"inline",children:[" ",e.props.map((function(e){return Object(n.jsx)("li",{children:e})}))]})]})),Object(n.jsxs)(P.a,{variant:"outlined",style:{marginTop:"5px",paddingTop:"10px",paddingLeft:"20px",paddingRight:"20px",paddingBottom:"10px",maxWidth:"600px"},children:[Object(n.jsx)(H.a,{variant:"body1",style:{"font-weight":"bold"},display:"inline",children:"Source:"}),Object(n.jsxs)(H.a,{variant:"body2",display:"inline",children:[" ",e.source]}),Object(n.jsx)("br",{}),Object(n.jsx)(H.a,{variant:"body1",style:{"font-weight":"bold"},display:"inline",children:"Target:"}),Object(n.jsxs)(H.a,{variant:"body2",display:"inline",children:[" ",e.target]}),Object(n.jsx)("br",{}),t]})},R=o(542),_=o(35),M=o(535),V=o(233),Y=o(539),J=o(540),U=o(538),A=o(224),q=o.n(A),K=o(534),Q=o(533),X=function e(){Object(u.a)(this,e)};X.helpText="Hover over a node or an edge to see comments. \n    Click a node once to see its code. \n    Double click on a file node to display the node's functions and on a function node to see other functions it's connected to.",X.backButtonTooltipText="Pop graph",X.resetButtonTooltipText="Reset screen",X.revealCodeTooltipText="Toggle to preview source code";var Z=X;var $=function(e){return Object(n.jsx)(Q.a,{title:Object(n.jsx)("span",{style:{fontSize:"14px"},children:Z.resetButtonTooltipText}),placement:"top",children:Object(n.jsx)(K.a,{size:"small",style:{backgroundColor:"white"},children:Object(n.jsx)(q.a,{})})})},ee=o(225),te=o.n(ee);var oe=function(){return Object(n.jsx)(Q.a,{title:Object(n.jsx)("span",{style:{fontSize:"14px"},children:Z.helpText}),children:Object(n.jsx)(K.a,{size:"small",style:{backgroundColor:"white"},children:Object(n.jsx)(te.a,{})})})},ne=o(226),ie=o.n(ne);var ae=function(){return Object(n.jsx)(Q.a,{title:Object(n.jsx)("span",{style:{fontSize:"14px"},children:Z.revealCodeTooltipText}),children:Object(n.jsx)(K.a,{size:"small",style:{backgroundColor:"white"},children:Object(n.jsx)(ie.a,{})})})},re=o(137),se=o(545),le=o(544),ce=o(547),de=o(543),he=Object(M.a)((function(e){return{searchBarStyle:{"& .MuiOutlinedInput-root":{"& fieldset":{},"&.Mui-focused fieldset":{borderColor:w.primaryColor}},selectStyle:{"&.Mui-selected":{borderColor:w.primaryColor}}}}}));var ue=function(e){var t,o=a.a.useState(function(){switch(e.graphName){case"files":return"file";case"main":return"function";default:return"file"}}()),i=Object(v.a)(o,2),r=i[0],s=i[1],l=he(),c=function(e){var t=e.nodes;return Object.keys(t)};return Object(n.jsxs)("div",{style:{display:"inline-flex"},className:"tour-start tour-graph-search",children:[Object(n.jsxs)(de.a,(t={className:l.selectStyle,style:{width:125,height:55,backgroundColor:"#ffffff"},value:r,variant:"outlined",onChange:function(e){s(e.target.value)}},Object(_.a)(t,"className","tour-file"),Object(_.a)(t,"children",[Object(n.jsx)(ce.a,{value:"file",children:"File"}),Object(n.jsx)(ce.a,{value:"function",children:"Function"})]),t)),Object(n.jsx)(le.a,{style:{width:450},value:e.selectedNodeName,options:function(){switch(r){case"file":return c(e.graphData.files);case"function":return c(e.graphData.main);default:return[]}}(),className:"tour-search",onChange:function(t,o){e.handleClick(o,r)},renderInput:function(e){return Object(n.jsx)(se.a,Object(re.a)(Object(re.a)({className:l.searchBarStyle},e),{},{placeholder:"Search",variant:"outlined",style:{backgroundColor:"#ffffff"}}))}})]})},pe=Object(M.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(_.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(_.a)({position:"relative",borderRadius:e.shape.borderRadius,borderColor:"white",marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(_.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),sectionDesktop:Object(_.a)({display:"flex"},e.breakpoints.down("sm"),{display:"none"})}}));function ge(e){var t=pe();Object(V.a)({palette:{primary:{main:"#fff"},secondary:{main:"#448aff"}}});return Object(n.jsx)("div",{className:t.grow,children:Object(n.jsx)(Y.a,{position:"static",style:{background:"#34495e"},children:Object(n.jsxs)(J.a,{children:[Object(n.jsx)("img",{style:{height:40,width:40,marginRight:10},src:"/company-icon.png",alt:"logo",className:"tour-logo"}),Object(n.jsx)(H.a,{className:t.title,variant:"h6",noWrap:!0,children:"VizCode Beta"}),Object(n.jsx)("div",{className:t.grow}),e.showSearch&&Object(n.jsx)("div",{style:{position:"absolute",left:"50%",top:"35%",transform:"translate(-50%, -35%)"},children:Object(n.jsx)(ue,{graphData:e.graphData,handleClick:e.handleClick,selectedNodeName:e.selectedNodeName,graphName:e.graphName})}),Object(n.jsxs)("div",{className:t.sectionDesktop,children:[Object(n.jsx)(U.a,{className:"tour-home",color:"inherit",onClick:e.resetGraph,children:Object(n.jsx)($,{})}),Object(n.jsx)(U.a,{className:"tour-help",color:"inherit",children:Object(n.jsx)(oe,{})}),Object(n.jsx)(U.a,{className:"tour-minimize-code-window",edge:"end",color:"inherit",onClick:e.handleCode,children:Object(n.jsx)(ae,{})})]})]})})})}var fe=o(138),be=o.n(fe),ve={headers:{"Content-Type":"application/json"}},ye=function(){function e(t,o,n){Object(u.a)(this,e),this.ip=t,this.api_key=o,this.name=n.name,this.email=n.email,n.send_notification&&this.sendNotification()}return Object(p.a)(e,[{key:"writeLog",value:function(e){e.name=this.name,e.email=this.email,e.ip=this.ip,e.time_stamp=Date.now(),e.api_key=this.api_key,be.a.post("https://vizcode-logger.herokuapp.com/log",JSON.stringify(e),ve)}},{key:"sendNotification",value:function(){var e={name:this.name,email:this.email,api_key:"alexsucks"};be.a.post("https://vizcode-logger.herokuapp.com/register",JSON.stringify(e),ve)}}]),e}(),me=o(227),je=o.n(me),Ce=o(228),ke=o.n(Ce),xe=o(47),Oe=o.n(xe),we=o(235),Ne=function(e){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(we.a,{callback:function(t){"reset"==t.action&&e.onResetCallback()},steps:e.steps,continuous:!0,showSkipButton:!0,styles:{tooltipContainer:{textAlign:"left"},buttonNext:{backgroundColor:w.primaryColor},buttonBack:{marginRight:10}},locale:{last:"End tour",skip:"Close tour"}})})},Se=o(541);function Te(e){window.innerWidth;return Object(n.jsxs)(Se.a,{style:{position:"relative",left:10,top:"5%",backgroundColor:"white",fontSize:14,color:"#000000",padding:10,width:125,height:300},children:[Object(n.jsx)("div",{style:{fontWeight:"600",paddingBottom:20,fontSize:16},children:"Graph Legend"}),Object(n.jsx)("div",{style:{fontWeight:"500",paddingBottom:10},children:"Colors"}),Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"d-flex justify-content-between",style:{display:"inline-flex"},children:[Object(n.jsx)(R.a,{style:{backgroundColor:w.nodeColorNext,height:20,width:20}}),Object(n.jsx)("div",{style:{paddingLeft:10},children:"Parent"})]}),Object(n.jsxs)("div",{className:"d-flex justify-content-between",style:{display:"inline-flex",marginTop:10},children:[Object(n.jsx)(R.a,{style:{backgroundColor:w.highlightedNodeColor,height:20,width:20}}),Object(n.jsx)("div",{style:{paddingLeft:10},children:"Current"})]}),Object(n.jsxs)("div",{className:"d-flex justify-content-between",style:{display:"inline-flex",marginTop:10},children:[Object(n.jsx)(R.a,{style:{backgroundColor:w.nodeColorPrev,height:20,width:20}}),Object(n.jsx)("div",{style:{paddingLeft:10},children:"Child"})]}),Object(n.jsxs)("div",{className:"d-flex justify-content-between",style:{display:"inline-flex",marginTop:10},children:[Object(n.jsx)(R.a,{style:{backgroundColor:w.prevClickedNodeColor,height:20,width:20}}),Object(n.jsx)("div",{style:{paddingLeft:10},children:"Previous"})]})]}),Object(n.jsx)("div",{style:{fontWeight:"500",paddingBottom:10,paddingTop:10},children:"Shapes"}),Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"d-flex justify-content-between",style:{display:"inline-flex"},children:[Object(n.jsx)(R.a,{style:{backgroundColor:w.highlightedNodeColor,height:20,width:20,borderRadius:100}}),Object(n.jsx)("div",{style:{paddingLeft:10},children:"Function"})]}),Object(n.jsxs)("div",{className:"d-flex justify-content-between",style:{display:"inline-flex",marginTop:10},children:[Object(n.jsx)(R.a,{style:{backgroundColor:w.highlightedNodeColor,height:20,width:20,transform:"rotate(45deg)"}}),Object(n.jsx)("div",{style:{paddingLeft:10},children:"File"})]})]})]})}var Ee=o(232),Fe=o.n(Ee);try{C.a.use(W.a)}catch(Re){console.log(Re)}C.a.use(je.a),C.a.use(Fe.a);var ze=function(e){var t=e.match(/\w\w/g).map((function(e){return parseInt(e,16)})),o=Object(v.a)(t,3),n=o[0],i=o[1],a=o[2];return"rgb(".concat(n,",").concat(i,",").concat(a,")")},Le={name:"cose-bilkent",fit:!0,nodeDimensionsIncludeLabels:!0,randomize:!1,idealEdgeLength:500},Ge={"background-color":w.nodeColor,label:"data(id)","text-margin-y":-10,height:250,width:250,fontSize:40},De={lineColor:"#ccc",curveStyle:"bezier",targetArrowShape:"triangle",arrowScale:2.5,width:7},We=o(477),Pe="45%",He="55%",Be=function(e){Object(f.a)(o,e);var t=Object(b.a)(o);function o(e){var n;return Object(u.a)(this,o),(n=t.call(this,e)).updateGraph=n.updateGraph.bind(Object(g.a)(n)),n.pushGraph=n.pushGraph.bind(Object(g.a)(n)),n.popGraph=n.popGraph.bind(Object(g.a)(n)),n.displayCode=n.displayCode.bind(Object(g.a)(n)),n.handleNodeClick=n.handleNodeClick.bind(Object(g.a)(n)),n.handleEdgeClick=n.handleEdgeClick.bind(Object(g.a)(n)),n.handleEdgeHover=n.handleEdgeHover.bind(Object(g.a)(n)),n.handleEdgeLessHover=n.handleEdgeLessHover.bind(Object(g.a)(n)),n.resetToDefault=n.resetToDefault.bind(Object(g.a)(n)),n.handleSearchClick=n.handleSearchClick.bind(Object(g.a)(n)),n.resizeGraph=n.resizeGraph.bind(Object(g.a)(n)),n.resizeWindow=n.resizeWindow.bind(Object(g.a)(n)),n.updateFilePath=n.updateFilePath.bind(Object(g.a)(n)),n.cyPopperRef=a.a.createRef(),n.cyPopperEdgeRef=a.a.createRef(),n.boldNodesWithSubgraphs=n.boldNodesWithSubgraphs.bind(Object(g.a)(n)),n.onGraphTutorialComplete=n.onGraphTutorialComplete.bind(Object(g.a)(n)),n.onHomeTutorialComplete=n.onHomeTutorialComplete.bind(Object(g.a)(n)),n.state={elements:[],initialized:!1,graphStack:[],times:{},currentCode:"",graph:null,prevClickedNode:null,prevDoubleClickedNode:null,edge:null,prevClickedEdge:null,connectedEdges:[],incomers:[],outgoers:[],codeWidth:"0%",graphWidth:He,resizeTimer:null,highlightedCode:null,openFile:"",logger:null,removedNodes:null,userName:"",graphData:null,showSearch:!0,showHomeTutorial:!0,showGraphTutorial:!0},n}return Object(p.a)(o,[{key:"componentDidMount",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t,o,n,i,a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("credentials.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return o=e.sent,"true"==localStorage.getItem("showedHomeTutorial")&&this.setState({showHomeTutorial:!1}),"true"==localStorage.getItem("showedGraphTutorial")&&this.setState({showGraphTutorial:!1}),e.next=12,We.v4();case 12:return n=e.sent,e.next=15,fetch("python_graph.json");case 15:return t=e.sent,e.next=18,t.json();case 18:i=e.sent,this.setState({initialized:!0,graphData:i,logger:new ye(n,"alexsucks",o)},(function(){a.state.logger.writeLog({description:"Initialized",data:{}})})),Oe.a.getInstance().init("18d2c50b050e486594c405ef0f9e4b3a",o.email),Oe.a.getInstance().logEvent("Initialized",{});case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){!!window.chrome||window.removeEventListener("resize",this.resizeWindow),Oe.a.getInstance().logEvent("ClosedInstance")}},{key:"clearGraphData",value:function(){this.setState({currentCode:"",prevClickedNode:null,edge:null,prevClickedEdge:null,connectedEdges:[],incomers:[],outgoers:[],openFile:"",highlightCode:null,prevDoubleClickedNode:null})}},{key:"setUpListeners",value:function(){var e=this;this.cy.on("mouseover","node",(function(t){e.handleNodeHover(t)})),this.cy.on("mouseout","node",(function(t){e.handleNodeLessHover(t)})),this.cy.on("tap","node",(function(t){e.handleNodeClick(t)})),this.cy.on("tap","edge",(function(t){e.handleEdgeClick(t)})),this.cy.on("mouseover","edge",(function(t){e.handleEdgeHover(t)})),this.cy.on("mouseout","edge",(function(t){e.handleEdgeLessHover(t)}))}},{key:"updateGraph",value:function(e,t){var o=this,n=new T(e,this.state.graphData),i=this.formatGraph(n);this.setState({initialized:!1},(function(){o.pushGraph(n,i,t)}))}},{key:"pushGraph",value:function(e,t,o){var n=this;this.state.graphStack.push(e.name),this.setState({elements:t,initialized:!0,graph:e},(function(){n.setUpListeners(),n.clearGraphData(),null!=o&&o()}))}},{key:"popGraph",value:function(){if(this.state.graphStack.length>1){this.state.graphStack.pop();var e=this.state.graphStack[this.state.graphStack.length-1],t=Le;Le={name:"random"},this.updateGraph(e),Le=t,this.state.graphStack.pop(),this.clearGraphData()}}},{key:"formatGraph",value:function(e){var t=this,o=[];return Object.keys(e.nodes).forEach((function(n){o.push(t.formatNode(e.nodes,n))})),e.edges.forEach((function(e){o.push(t.formatEdge(e))})),o}},{key:"formatNode",value:function(e,t){return{data:{id:t,label:e[t].name,type:e[t].type}}}},{key:"formatEdge",value:function(e){return{data:{source:e.from,target:e.to,props:e.data.props}}}},{key:"displayCode",value:function(e){var t=this,o=this.state.graph.nodes[e].filePath;void 0!==o?fetch(o).then((function(e){return e.text()})).then((function(e){t.setState({currentCode:e})})):this.setState({currentCode:""})}},{key:"createContentFromComponent",value:function(e){var t=document.createElement("div");return s.a.render(e,t),document.body.appendChild(t),t}},{key:"updateFilePath",value:function(e){"python"==this.state.graph.language?this.setState({openFile:this.state.graph.nodes[e].originalFilePath}):this.setState({openFile:"/src/".concat(e,".js")})}},{key:"moveCameraToNode",value:function(e){var t=this.cy.nodes('[id = "'.concat(e,'"]'))[0],o=this.state.incomers,n=this.state.outgoers;o.merge(n),o.merge(t),this.cy.fit(o,10)}},{key:"filterNodes",value:function(e){var t=this.cy.nodes().not(e),o=[];t.forEach((function(e){o.push(e.connectedEdges())})),this.cy.remove(t),this.setState({removedNodes:t,removedEdges:o}),this.cy.elements().makeLayout(Le).run(),this.cy.fit(50)}},{key:"restoreGraph",value:function(){if(null!=this.state.removedNodes&&null!=this.state.removedEdges){this.state.removedNodes.restore();var e,t=Object(l.a)(this.state.removedEdges);try{for(t.s();!(e=t.n()).done;){e.value.restore()}}catch(Re){t.e(Re)}finally{t.f()}}}},{key:"getNodesFromFile",value:function(e){for(var t=null,o=0,n=Object.keys(this.state.graph.nodes);o<n.length;o++){var i=n[o];if(this.state.graph.nodes[i].originalFilePath==e){1;var a=this.cy.nodes('[id = "'.concat(i,'"]'));null==t?t=a:t.merge(a)}}return t}},{key:"displayNodesFromFile",value:function(e){var t=this.getNodesFromFile(e);this.filterNodes(t)}},{key:"handleNodeClick",value:function(e){this.state.logger.writeLog({description:"NodeClick"}),Oe.a.getInstance().logEvent("NodeClick");var t=e.target,o=t._private.data.id,n=new Date,i=!1;if(void 0!==this.state.times[o]){if(n-this.state.times[o]<500){this.state.logger.writeLog({description:"NodeDoubleClick"}),Oe.a.getInstance().logEvent("NodeDoubleClick");var a=this.state.graph.nodes[o].child;if(void 0!==a)return this.handleNodeLessHover(e),void this.updateGraph(a);if("File"==this.state.graph.nodes[o].type){this.handleNodeLessHover(e);var r=Le;return Le={name:"random"},this.updateGraph("main"),this.displayNodesFromFile(o),Le=r,void this.setState({openFile:o})}this.restoreGraph();var s=t.incomers(),l=t.outgoers(),c=s.clone();c.merge(l),c.merge(t),this.filterNodes(c),i=!0}this.state.times[o]=n}else this.state.times[o]=n;this.displayCode(o),this.cy.edges().style("lineColor",w.edgeColor),this.cy.nodes('[id != "'.concat(o,'"]')).style("background-color",w.nodeColor);var d=t.incomers(),h=t.outgoers(),u=t.connectedEdges();d.style("background-color",w.nodeColorPrev),h.style("background-color",w.nodeColorNext),u.style("lineColor",w.highlightedEdgeColor),i&&(null!=this.state.prevDoubleClickedNode&&this.state.prevDoubleClickedNode!=t&&this.changeNodeColor(this.state.prevDoubleClickedNode._private.data.id,w.prevClickedNodeColor),this.setState({prevDoubleClickedNode:t})),this.setState({prevClickedEdge:null,edge:null,incomers:d,outgoers:h,connectedEdges:u,prevClickedNode:t,currentCode:""}),this.updateFilePath(o),this.highlightCode(this.state.graph.nodes[o].highlightedCodePath)}},{key:"changeNodeColor",value:function(e,t){this.cy.nodes('[id = "'.concat(e,'"]')).style("background-color",t)}},{key:"handleNodeHover",value:function(e){var t=e.target,o=t._private.data.id,i=this.state.graph.nodes[o].type,a=this.state.graph.nodes[o].comment,r=this.state.graph.nodes[o].originalFilePath;this.cy.nodes('[id = "'.concat(o,'"]'))[0]._private.style["background-color"].strValue!=ze(w.prevClickedNodeColor)&&this.changeNodeColor(o,w.highlightedNodeColor),this.cyPopperRef.current=t.popper({content:this.createContentFromComponent(Object(n.jsx)(B,{name:t._private.data.label,comment:a,type:i,filePath:r})),popper:{placement:"below",removeOnDestroy:!0}}),x()("#root").css("cursor","pointer")}},{key:"handleNodeLessHover",value:function(e){var t=e.target,o=t._private.data.id;null!=this.cy.nodes('[id = "'.concat(o,'"]'))[0]._private.style["background-color"]&&this.cy.nodes('[id = "'.concat(o,'"]'))[0]._private.style["background-color"].strValue!=ze(w.prevClickedNodeColor)&&(this.state.incomers.includes(t)?this.changeNodeColor(o,w.nodeColorPrev):this.state.outgoers.includes(t)?this.changeNodeColor(o,w.nodeColorNext):t!=this.state.prevClickedNode&&this.changeNodeColor(o,w.nodeColor)),null!=this.cyPopperRef.current&&(this.cyPopperRef.current.destroy(),this.cyPopperRef.current=null),x()("#root").css("cursor","auto")}},{key:"handleEdgeClick",value:function(e){var t=this;this.state.logger.writeLog({description:"EdgeClick"}),Oe.a.getInstance().logEvent("EdgeClick");var o=e.target,i=o._private.data.source,a=o._private.data.target,r=a,s=new Date;if(void 0!==this.state.times[r]){if(s-this.state.times[r]<500&&(this.state.logger.writeLog({description:"EdgeDoubleClick"}),void 0!=this.state.graphData.files.nodes[i]&&void 0!=this.state.graphData.files.nodes[i])){this.handleEdgeLessHover(e);var c=Le;Le={name:"random"},this.updateGraph("main");var d=this.getNodesFromFile(i);d.style("background-color",w.highlightedNodeColor);var h=this.getNodesFromFile(a);return d.merge(h),this.filterNodes(d),Le=c,void this.setState({})}this.state.times[r]=s}else this.state.times[r]=s;this.cy.edges().forEach((function(e){e!=o&&e.style("line-color",w.edgeColor)})),this.state.graphStack.length<2&&this.updateFilePath(i),this.setState({currentCode:""},(function(){t.displayCode(i)}));var u,p=Object(l.a)(this.state.graph.edges);try{for(p.s();!(u=p.n()).done;){var g=u.value;if(g.from==i&&g.to==a){this.highlightCode(g.highlightedCodePath);break}}}catch(Re){p.e(Re)}finally{p.f()}this.setState({prevClickedEdge:o,prevClickedNode:null}),null==this.cyPopperEdgeRef.current&&(this.cyPopperEdgeRef.current=o.popper({content:this.createContentFromComponent(Object(n.jsx)(I,{target:o._private.data.target,source:o._private.data.source,props:o._private.data.props,language:this.state.graph.language})),popper:{placement:"below",removeOnDestroy:!0}}))}},{key:"handleEdgeHover",value:function(e){var t=e.target;t.style("lineColor",w.highlightedEdgeColor),x()("#root").css("cursor","pointer"),this.setState({edge:t})}},{key:"handleEdgeLessHover",value:function(){this.state.edge==this.state.prevClickedEdge||this.state.connectedEdges.includes(this.state.edge)||this.state.edge.style("lineColor",w.nodeColor),null!==this.cyPopperEdgeRef.current&&(this.cyPopperEdgeRef.current.destroy(),this.cyPopperEdgeRef.current=null),x()("#root").css("cursor","auto")}},{key:"highlightSearchedNode",value:function(e){var t=this.cy.nodes('[id = "'.concat(e,'"]'))[0];this.changeNodeColor(e,w.highlightedNodeColor);var o=t.incomers(),n=t.outgoers();o.style("background-color",w.nodeColorPrev),n.style("background-color",w.nodeColorNext),t.connectedEdges().style("lineColor",w.highlightedEdgeColor),this.displayCode(e),this.updateFilePath(e),this.setState({incomers:o,outgoers:n,prevClickedNode:t});var i=o.clone();i.merge(n),i.merge(t),this.filterNodes(i),this.highlightCode(this.state.graph.nodes[e].highlightedCodePath)}},{key:"handleSearchClick",value:function(e,t){var o=this;if(this.state.logger.writeLog({description:"SearchClick"}),Oe.a.getInstance().logEvent("SearchClick"),void 0!=this.cy){if(this.resetGraph(),void 0==e)return void this.setState({openFile:""});this.restoreGraph()}var n=function(){this.highlightSearchedNode(e),Le=i,this.setState({})}.bind(this),i=Le;this.setState({showSearch:!1,codeWidth:Pe,showTutorial:!1},(function(){switch(Le={name:"random"},t){case"file":return void o.updateGraph("files",n);case"function":return void o.updateGraph("main",n);default:return}}))}},{key:"addWrapper",value:function(e,t,o){var n=document.createElement("div");n.id="codeHighlight",n.style.borderLeft="5px solid "+w.highlightedNodeColor,n.style.paddingLeft="5px";for(var i=!1,a=t;a<o+1;a++){var r=e[a];a==t&&(r.textContent.includes("\n\n")&&(i=!0),r.textContent=r.textContent.replace(/(\r\n|\n|\r)/gm,"")),r.remove(),r.style.color="FFFFFF",n.appendChild(r)}0!=t?e[t-1].after(n):e.length>o+1&&e[o+1].before(n),n.before(document.createElement("br")),i&&0!=t&&(e[t-1].textContent=e[t-1].textContent+"\n"),e.length>o+1&&(e[o+1].textContent.includes("\n\n")&&n.after(document.createElement("br")),e[o+1].textContent=e[o+1].textContent.replace(/(\r\n|\n|\r)/gm,""))}},{key:"highlightCode",value:function(e){setTimeout(function(){var t=this;void 0!==e&&fetch(e).then((function(e){return e.text()})).then((function(e){return t.setState({highlightedCode:e.replace(/\s+/g,"")},(function(){if(void 0!=t.state.highlightedCode){for(var e,o,n=x()("code").find("span"),i=!1,a=t.state.highlightedCode.length,r=0;r<n.length&&!i;r++)for(var s="",l=r;l<n.length;l++){var c=n[l].textContent.replace(/\s+/g,"");if((s=s.concat(c)).length>a)break;if(s.length==a&&s==t.state.highlightedCode){e=r,o=l,t.addWrapper(n,e,o),i=!0;break}}var d=document.getElementById("codeHighlight");d&&d.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}))}))}.bind(this),250)}},{key:"resizeGraph",value:function(){var e=this;if(void 0!=this.cy){var t=function(){e.cy.resize(),e.cy.fit(30)};this.state.graphWidth==He?this.setState({codeWidth:"0%",graphWidth:"100%"},(function(){t()})):this.setState({codeWidth:Pe,graphWidth:He},(function(){t()}))}}},{key:"resetToDefault",value:function(){if(void 0!=this.cy){this.setState({graphStack:[],graph:null,showSearch:!0,codeWidth:"0%"}),this.clearGraphData();var e=Le;Le={name:"random"},this.updateGraph("files"),Le=e}}},{key:"resetGraph",value:function(){this.cy.nodes().style("background-color",w.nodeColor),this.cy.edges().style("line-color",w.edgeColor),this.clearGraphData()}},{key:"boldNodesWithSubgraphs",value:function(e){var t=this.cy;t.nodes().forEach((function(o){var n=o._private.data.id;void 0!=e.nodes[n].child&&t.nodes('[id = "'.concat(n,'"]')).style("font-weight","bold")}))}},{key:"resizeWindow",value:function(){void 0!=this.cy&&(clearTimeout(this.state.resizeTimer),this.state.resizeTimer=setTimeout(function(){var e=this;this.setState({initialized:!1},(function(){e.setState({initialized:!0,currentCode:"",prevClickedNode:null,edge:null,prevClickedEdge:null,connectedEdges:[],incomers:[],outgoers:[]},(function(){e.setUpListeners()}))}))}.bind(this),1e3))}},{key:"getCytoscape",value:function(){var e=this;return Object(n.jsx)(m.a,{className:"tour-cytoscape tour-cytoscape-click tour-cytoscape-double-click",elements:this.state.elements,style:{width:this.state.graphWidth},cy:function(t){e.cy=t},layout:Le,stylesheet:[{selector:"node",style:Ge},{selector:'node[type="Component"]',style:{shape:"diamond"}},{selector:'node[type="Function"]',style:{shape:"ellipse"}},{selector:'node[type="File"]',style:{shape:"diamond"}},{selector:"edge",style:De}]})}},{key:"onGraphTutorialComplete",value:function(){this.setState({showGraphTutorial:!1}),localStorage.setItem("showedGraphTutorial",!0)}},{key:"onHomeTutorialComplete",value:function(){this.setState({showHomeTutorial:!1}),localStorage.setItem("showedHomeTutorial",!0)}},{key:"render",value:function(){if(this.state.initialized){var e=Object(n.jsx)(H.a,{style:{color:"white",marginTop:"50%"},align:"center",children:"Press on a node to see related code"});return""!=this.state.currentCode&&(e=Object(n.jsx)(G,{children:Object(n.jsx)("pre",{className:"prettyprint linenums",style:{whiteSpace:"pre-wrap",marginTop:"0",fontSize:13},children:Object(n.jsx)("code",{className:"language-javascript linenums",children:Object(n.jsx)("div",{dangerouslySetInnerHTML:{__html:F.a.prettyPrintOne(this.state.currentCode.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),this.state.graph.language)}})})})})),Object(n.jsxs)(R.a,{style:{width:x()(window).width(),height:x()(window).height()},children:[!this.state.showSearch&&this.state.showGraphTutorial&&Object(n.jsx)(Ne,{steps:S.graphSteps,onResetCallback:this.onGraphTutorialComplete}),this.state.showSearch&&this.state.showHomeTutorial&&Object(n.jsx)(Ne,{steps:S.homeSteps,onResetCallback:this.onHomeTutorialComplete}),Object(n.jsx)(R.a,{children:Object(n.jsx)(ge,{handleClick:this.handleSearchClick,selectedNodeName:this.state.prevClickedNode?this.state.prevClickedNode._private.data.id:null,graphData:this.state.graphData,handleCode:this.resizeGraph,resetGraph:this.resetToDefault,popGraph:this.popGraph,showSearch:!this.state.showSearch,graphName:this.state.graph?this.state.graph.name:null})}),Object(n.jsxs)(R.a,{id:"field",style:{display:"flex",height:"calc(100% - 64px)"},children:[!this.state.showSearch&&Object(n.jsx)(Te,{graphWidth:this.state.graphWidth}),!this.state.showSearch&&this.getCytoscape(),this.state.showSearch&&Object(n.jsx)("div",{children:Object(n.jsxs)("div",{style:{position:"absolute",left:"50%",top:"35%",transform:"translate(-50%, -35%)",textAlign:"center"},children:[Object(n.jsx)("div",{style:{fontSize:75,color:"#34495e"},children:"Welcome to VizCode"}),Object(n.jsx)("div",{style:{marginTop:20,fontSize:22,marginBottom:50},children:"Search for any file or function in your codebase, and we will create a dependency graph that helps you understand that file or function and how it relates to other logic in your codebase."}),Object(n.jsx)(ue,{graphData:this.state.graphData,handleClick:this.handleSearchClick,selectedNodeName:this.state.prevClickedNode?this.state.prevClickedNode._private.data.id:null})]})}),this.state.codeWidth==Pe&&Object(n.jsxs)("div",{className:"codeWindow",id:"codeWindow",style:{width:this.state.codeWidth,overflow:"scroll",backgroundColor:"#1d1f21",paddingLeft:"10px",paddingRight:"10px",paddingTop:"10px"},children:[this.state.openFile&&Object(n.jsxs)("div",{children:[Object(n.jsxs)(H.a,{variant:"subtitle2",style:{color:"white",fontSize:16},children:["File path: ",this.state.openFile]}),Object(n.jsx)("hr",{})]}),e]})]})]})}return Object(n.jsx)("div",{style:{marginLeft:"47.5%",marginTop:"22.5%"},children:Object(n.jsx)(ke.a,{type:"spin",color:"##FF0000",height:"10%",width:"10%"})})}}]),o}(i.Component),Ie=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,549)).then((function(t){var o=t.getCLS,n=t.getFID,i=t.getFCP,a=t.getLCP,r=t.getTTFB;o(e),n(e),i(e),a(e),r(e)}))};s.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(Be,{})}),document.getElementById("root")),Ie()}},[[496,1,2]]]);
//# sourceMappingURL=main.41bc7e32.chunk.js.map