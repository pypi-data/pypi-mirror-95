(this["webpackJsonpsupervisor-react"]=this["webpackJsonpsupervisor-react"]||[]).push([[0],{130:function(e,t,n){e.exports=n(176)},142:function(e,t){},144:function(e,t){},176:function(e,t,n){"use strict";n.r(t);var r,a=n(0),s=n.n(a),o=n(10),c=(n(135),n(45)),l=n(91),i=n(4),u=n(225),p=n(238),m=n(236),f=n(235),d=n(243),h=n(234),E=n(227),v=n(178),g=n(233),P=n(240),b=n(245),O=n(179),A=n(241),w=n(230),N=n(231),x=n(232),j=n(229),k=n(228),C=n(226),S=n(244),G=n(120),I=n(223),T=n(224),R=n(242),y=n(3),F=n(116),U=n.n(F),z=n(89),L=n.n(z),D=n(90),B=n.n(D),W=n(114),K=n.n(W),H=n(118),$=n.n(H),V=n(115),X=n.n(V),J=n(117),M=n.n(J),q=n(51),Q=n.n(q),Y=n(11),Z=n.n(Y),_=n(19),ee=n(112),te=n(137);!function(e){e[e.STOPPED=0]="STOPPED",e[e.STARTING=10]="STARTING",e[e.RUNNING=20]="RUNNING",e[e.BACKOFF=30]="BACKOFF",e[e.STOPPING=40]="STOPPING",e[e.EXITED=100]="EXITED",e[e.FATAL=200]="FATAL",e[e.UNKNOWN=1e3]="UNKNOWN"}(r||(r={}));r.STOPPED,r.EXITED,r.FATAL,r.UNKNOWN;var ne,re=[r.RUNNING,r.BACKOFF,r.STARTING];!function(e){e[e.FATAL=2]="FATAL",e[e.RUNNING=1]="RUNNING",e[e.RESTARTING=0]="RESTARTING",e[e.SHUTDOWN=-1]="SHUTDOWN"}(ne||(ne={}));var ae=function e(t){var n=this;Object(ee.a)(this,e),this.client=void 0,this.setProcesses=void 0,this.methodCall=function(e,t){return new Promise((function(r,a){return n.client.methodCall(e,t,(function(e,t){return e?a(e):r(t)}))}))},this.getSupervisorVersion=function(){return n.methodCall("supervisor.getSupervisorVersion",[])},this.getState=Object(_.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methodCall("supervisor.getState",[]);case 2:return e.abrupt("return",e.sent.statename);case 3:case"end":return e.stop()}}),e)}))),this.getAllProcessInfo=Object(_.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=n,e.next=4,n.methodCall("supervisor.getAllProcessInfo",[]);case 4:e.t1=e.sent,e.t0.setProcesses.call(e.t0,e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),n.setProcesses([]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),this.startProcess=function(){var e=Object(_.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methodCall("supervisor.startProcess",["".concat(t.group,":").concat(t.name)]);case 2:return e.next=4,n.getAllProcessInfo();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.startProcessGroup=function(){var e=Object(_.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methodCall("supervisor.startProcessGroup",[t]);case 2:return e.next=4,n.getAllProcessInfo();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.startAllProcesses=Object(_.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methodCall("supervisor.startAllProcesses",[]);case 2:return e.next=4,n.getAllProcessInfo();case 4:case"end":return e.stop()}}),e)}))),this.stopProcess=function(){var e=Object(_.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methodCall("supervisor.stopProcess",["".concat(t.group,":").concat(t.name)]);case 2:return e.next=4,n.getAllProcessInfo();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.stopProcessGroup=function(){var e=Object(_.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methodCall("supervisor.stopProcessGroup",[t]);case 2:return e.next=4,n.getAllProcessInfo();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.stopAllProcesses=Object(_.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methodCall("supervisor.stopAllProcesses",[]);case 2:return e.next=4,n.getAllProcessInfo();case 4:case"end":return e.stop()}}),e)}))),this.restartProcess=function(){var e=Object(_.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!re.includes(t.state)){e.next=4;break}return e.next=4,n.stopProcess(t);case 4:return e.prev=4,e.next=7,n.startProcess(t);case 7:return e.finish(4);case 8:case"end":return e.stop()}}),e,null,[[0,,4,8]])})));return function(t){return e.apply(this,arguments)}}(),this.restartProcessGroup=function(){var e=Object(_.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.stopProcessGroup(t);case 2:return e.next=4,n.startProcessGroup(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.restartAllProcesses=Object(_.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.stopAllProcesses();case 2:return e.next=4,n.startAllProcesses();case 4:case"end":return e.stop()}}),e)}))),this.clearProcessLogs=function(e){return n.methodCall("supervisor.clearProcessLogs",["".concat(e.group,":").concat(e.name)])},this.clearAllProcessLogs=function(){return n.methodCall("supervisor.clearAllProcessLogs",[])},this.client=te.createClient({host:window.location.hostname,port:window.location.port,path:"/RPC2"}),this.setProcesses=t},se=function(e){var t=e.title,n=Object(l.a)(e,["title"]);return s.a.createElement(S.a,{title:t},s.a.createElement(p.a,{component:"span"},s.a.createElement(v.a,n)))},oe=function(e){var t=e.supervisor,n=Object(l.a)(e,["supervisor"]),r=Object(a.useState)(""),o=Object(c.a)(r,2),i=o[0],u=o[1];return Object(a.useEffect)((function(){t.getSupervisorVersion().then(u)}),[]),s.a.createElement(R.a,n,s.a.createElement(I.a,null,"About"),s.a.createElement(T.a,{dividers:!0},s.a.createElement("ul",null,s.a.createElement("li",null,"supervisor: ",i),s.a.createElement("li",null,"supervisor-react: 0.1.3"))))},ce=Object(i.a)({root:{flexGrow:1}})(G.a),le=function(e){var t=e.supervisor,n=Object(a.useState)(null),r=Object(c.a)(n,2),o=r[0],l=r[1],i=s.a.useState(!1),p=Object(c.a)(i,2),m=p[0],f=p[1];return s.a.createElement(s.a.Fragment,null,s.a.createElement(u.a,{position:"static"},s.a.createElement(C.a,null,s.a.createElement(v.a,{color:"inherit",onClick:function(e){return l(e.currentTarget)}},s.a.createElement(K.a,null)),s.a.createElement(P.a,{anchorEl:o,open:null!==o,onClose:function(){return l(null)}},s.a.createElement(b.a,{onClick:function(e){return t.stopAllProcesses()}},"Stop all"),s.a.createElement(b.a,{onClick:function(e){return t.startAllProcesses()}},"Start All"),s.a.createElement(b.a,{onClick:function(e){return t.restartAllProcesses()}},"Restart All"),s.a.createElement(b.a,{onClick:function(e){return t.clearAllProcessLogs()}},"Clear All"),s.a.createElement(b.a,{onClick:function(e){l(null),f(!0)}},"About")),s.a.createElement(ce,{variant:"h5"},"Supervisor"),s.a.createElement(S.a,{title:"Reload Supervisor"},s.a.createElement(v.a,{color:"inherit",onClick:function(e){return t.getAllProcessInfo()}},s.a.createElement(X.a,null))))),s.a.createElement(oe,{supervisor:t,open:m,onClose:function(){return f(!1)}}))},ie=Object(i.a)({root:{minHeight:43,padding:0,"&$expanded":{margin:0,minHeight:43}},content:{margin:0,minHeight:43,"&$expanded":{margin:0}},expanded:{}})(E.a),ue=Object(i.a)({root:{"& td:nth-child(1)":{width:200},"& td:nth-child(2)":{width:120},"& td:nth-child(3)":{textAlign:"center",width:73},"& td:nth-child(5)":{width:132},"& td:nth-child(6)":{width:113}}})(k.a),pe=Object(i.a)((function(e){var t=e.palette;return{all:{color:t.success.main},some:{color:t.success.light},none:{color:t.warning.light}}}))((function(e){var t=e.running,n=e.length,r=e.classes;return s.a.createElement(p.a,{component:"span",className:t===n?r.all:0===t?r.none:r.some},t,"/",n)})),me=Object(i.a)((function(e){return{root:{color:e.palette.success.main}}}))(U.a),fe=Object(i.a)((function(e){return{root:{color:e.palette.error.main}}}))(L.a),de=Object(i.a)((function(e){return{root:{color:e.palette.warning.main}}}))(L.a),he=function(e){var t=e.process,n=e.supervisor,a=re.includes(t.state)?n.stopProcess:n.startProcess;return s.a.createElement(S.a,{title:t.name},s.a.createElement(v.a,{size:"small",onClick:function(e){e.stopPropagation(),a(t)}},re.includes(t.state)?s.a.createElement(me,null):t.state===r.FATAL?s.a.createElement(fe,null):s.a.createElement(de,null)))},Ee=function(e){var t=e.value,n=e.processes,r=e.supervisor,a=Q.a.assign({RUNNING:0,STOPPED:0},Q.a.countBy(n,(function(e){return re.includes(e.state)?"RUNNING":"STOPPED"})));return s.a.createElement(ie,null,s.a.createElement(j.a,{component:O.a,elevation:0},s.a.createElement(w.a,{size:"small"},s.a.createElement(N.a,null,s.a.createElement(ue,null,s.a.createElement(x.a,null,t),s.a.createElement(x.a,null),s.a.createElement(x.a,null,s.a.createElement(pe,{running:a.RUNNING,length:n.length})),s.a.createElement(x.a,null,n.map((function(e){return s.a.createElement(he,{key:e.name,process:e,supervisor:r})}))),s.a.createElement(x.a,{padding:"none"},s.a.createElement(se,{size:"small",title:"Stop Group",color:"primary",onClick:function(e){e.stopPropagation(),r.stopProcessGroup(t)},disabled:0===a.RUNNING},s.a.createElement(M.a,{fontSize:"small"})),s.a.createElement(se,{size:"small",title:"Start Group",color:"primary",onClick:function(e){e.stopPropagation(),r.startProcessGroup(t)},disabled:a.RUNNING===n.length},s.a.createElement($.a,{fontSize:"small"})),s.a.createElement(se,{size:"small",title:"Restart Group",color:"primary",onClick:function(e){e.stopPropagation(),r.restartProcessGroup(t)}},s.a.createElement(B.a,{fontSize:"small"}))),s.a.createElement(x.a,null))))))},ve=Object(i.a)((function(e){var t=e.palette;return{root:{borderRadius:6,color:t.error.contrastText,padding:"2px 4px"},running:{backgroundColor:t.success.main},stopped:{backgroundColor:t.warning.light},fatal:{backgroundColor:t.error.main}}}))((function(e){var t=e.process,n=e.classes;return s.a.createElement(p.a,{component:"span",className:Object(y.a)(n.root,re.includes(t.state)?n.running:t.state!==r.FATAL?n.stopped:n.fatal)},t.statename)})),ge=Object(i.a)({root:{"& td:nth-child(1)":{width:120},"& td:nth-child(2)":{width:200},"& td:nth-child(3)":{width:73},"& td:nth-child(5)":{width:132},"& td:nth-child(6)":{width:113}}})(k.a),Pe=Object(i.a)({root:{display:"inline-block",textAlign:"center",width:52}})(p.a),be=function(e){var t=e.process;return s.a.createElement(ge,null,s.a.createElement(x.a,null),s.a.createElement(x.a,null,t.name),s.a.createElement(x.a,{padding:"none",align:"center"},s.a.createElement(ve,e)),s.a.createElement(x.a,null,t.description),s.a.createElement(x.a,{padding:"none"},s.a.createElement(Pe,{component:"span"},s.a.createElement(A.a,{size:"small",checked:re.includes(t.state),onChange:function(n){return(re.includes(t.state)?e.supervisor.stopProcess:e.supervisor.startProcess)(t)}})),s.a.createElement(se,{size:"small",title:"Restart",color:"primary",onClick:function(n){return e.supervisor.restartProcess(t)}},s.a.createElement(B.a,{fontSize:"small"}))),s.a.createElement(x.a,null,s.a.createElement(g.a,{href:"logtail/".concat(t.group,":").concat(t.name)},"stdout"),"\xa0",s.a.createElement(g.a,{href:"logtail/".concat(t.group,":").concat(t.name,"/stderr")},"stderr")))},Oe=Object(i.a)({root:{padding:0}})(h.a),Ae=function(e){return s.a.createElement(Oe,null,s.a.createElement(j.a,null,s.a.createElement(w.a,{size:"small"},s.a.createElement(N.a,null,e.processes.map((function(t){return s.a.createElement(be,Object.assign({key:t.name,process:t},e))}))))))},we=Object(i.a)({root:{"&$expanded":{margin:0},backgroundColor:"unset"},expanded:{}})(d.a),Ne=function(e){return s.a.createElement(we,{elevation:0},s.a.createElement(Ee,e),s.a.createElement(Ae,e))},xe=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1],o=new ae(r);return Object(a.useEffect)((function(){o.getAllProcessInfo()}),[]),s.a.createElement(s.a.Fragment,null,s.a.createElement(f.a,null),s.a.createElement(m.a,{fixed:!0},s.a.createElement(le,{supervisor:o}),Q()(n).groupBy("group").toPairs().sortBy().map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];return s.a.createElement(Ne,{key:n,value:n,processes:Q.a.sortBy(r,"name"),supervisor:o})})).value()))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(o.render)(s.a.createElement(a.StrictMode,null,s.a.createElement(xe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[130,1,2]]]);