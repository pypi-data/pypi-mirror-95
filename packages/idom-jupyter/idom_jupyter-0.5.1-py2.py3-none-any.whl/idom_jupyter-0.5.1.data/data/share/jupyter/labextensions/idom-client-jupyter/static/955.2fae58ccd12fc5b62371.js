/*! For license information please see 955.2fae58ccd12fc5b62371.js.LICENSE.txt */
(self.webpackChunkidom_client_jupyter=self.webpackChunkidom_client_jupyter||[]).push([[955],{483:(e,t,n)=>{"use strict";n.d(t,{af:()=>P,_p:()=>w});var r={};n.r(r),n.d(r,{JsonPatchError:()=>v,_areEquals:()=>T,applyOperation:()=>A,applyPatch:()=>P,applyReducer:()=>g,deepClone:()=>E,getValueByPointer:()=>w,validate:()=>D,validator:()=>b});var o={};n.r(o),n.d(o,{compare:()=>k,generate:()=>N,observe:()=>R,unobserve:()=>C});var a,i=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=Object.prototype.hasOwnProperty;function s(e,t){return u.call(e,t)}function p(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);for(var r in t=[],e)s(e,r)&&t.push(r);return t}function c(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function _(e){for(var t,n=0,r=e.length;n<r;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0}function l(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function d(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function f(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(f(e[t]))return!0}else if("object"==typeof e){var r=p(e),o=r.length;for(t=0;t<o;t++)if(f(e[r[t]]))return!0}return!1}function h(e,t){var n=[e];for(var r in t){var o="object"==typeof t[r]?JSON.stringify(t[r],null,2):t[r];void 0!==o&&n.push(r+": "+o)}return n.join("\n")}var m=function(e){function t(t,n,r,o,a){var i=this.constructor,u=e.call(this,h(t,{name:n,index:r,operation:o,tree:a}))||this;return u.name=n,u.index=r,u.operation=o,u.tree=a,Object.setPrototypeOf(u,i.prototype),u.message=h(t,{name:n,index:r,operation:o,tree:a}),u}return i(t,e),t}(Error),v=m,E=c,y={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=w(n,this.path);r&&(r=c(r));var o=A(n,{op:"remove",path:this.from}).removed;return A(n,{op:"add",path:this.path,value:o}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=w(n,this.from);return A(n,{op:"add",path:this.path,value:c(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:T(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},O={add:function(e,t,n){return _(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:y.move,copy:y.copy,test:y.test,_get:y._get};function w(e,t){if(""==t)return e;var n={op:"_get",path:t};return A(e,n),n.value}function A(e,t,n,r,o,a){if(void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===o&&(o=!0),void 0===a&&(a=0),n&&("function"==typeof n?n(t,0,e,t.path):b(t,0)),""===t.path){var i={newDocument:e};if("add"===t.op)return i.newDocument=t.value,i;if("replace"===t.op)return i.newDocument=t.value,i.removed=e,i;if("move"===t.op||"copy"===t.op)return i.newDocument=w(e,t.from),"move"===t.op&&(i.removed=e),i;if("test"===t.op){if(i.test=T(e,t.value),!1===i.test)throw new v("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return i.newDocument=e,i}if("remove"===t.op)return i.removed=e,i.newDocument=null,i;if("_get"===t.op)return t.value=e,i;if(n)throw new v("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return i}r||(e=c(e));var u=(t.path||"").split("/"),s=e,p=1,l=u.length,f=void 0,h=void 0,m=void 0;for(m="function"==typeof n?n:b;;){if(h=u[p],o&&"__proto__"==h)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===f&&(void 0===s[h]?f=u.slice(0,p).join("/"):p==l-1&&(f=t.path),void 0!==f&&m(t,0,e,f)),p++,Array.isArray(s)){if("-"===h)h=s.length;else{if(n&&!_(h))throw new v("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);_(h)&&(h=~~h)}if(p>=l){if(n&&"add"===t.op&&h>s.length)throw new v("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);if(!1===(i=O[t.op].call(t,s,h,e)).test)throw new v("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return i}}else if(h&&-1!=h.indexOf("~")&&(h=d(h)),p>=l){if(!1===(i=y[t.op].call(t,s,h,e)).test)throw new v("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return i}s=s[h]}}function P(e,t,n,r,o){if(void 0===r&&(r=!0),void 0===o&&(o=!0),n&&!Array.isArray(t))throw new v("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=c(e));for(var a=new Array(t.length),i=0,u=t.length;i<u;i++)a[i]=A(e,t[i],n,!0,o,i),e=a[i].newDocument;return a.newDocument=e,a}function g(e,t,n){var r=A(e,t);if(!1===r.test)throw new v("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function b(e,t,n,r){if("object"!=typeof e||null===e||Array.isArray(e))throw new v("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!y[e.op])throw new v("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!=typeof e.path)throw new v("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new v('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new v("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new v("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&f(e.value))throw new v("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var o=e.path.split("/").length,a=r.split("/").length;if(o!==a+1&&o!==a)throw new v("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==r)throw new v("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var i=D([{op:"_get",path:e.from,value:void 0}],n);if(i&&"OPERATION_PATH_UNRESOLVABLE"===i.name)throw new v("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function D(e,t,n){try{if(!Array.isArray(e))throw new v("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)P(c(t),c(e),n||!0);else{n=n||b;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(e){if(e instanceof v)return e;throw e}}function T(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,r,o,a=Array.isArray(e),i=Array.isArray(t);if(a&&i){if((r=e.length)!=t.length)return!1;for(n=r;0!=n--;)if(!T(e[n],t[n]))return!1;return!0}if(a!=i)return!1;var u=Object.keys(e);if((r=u.length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!t.hasOwnProperty(u[n]))return!1;for(n=r;0!=n--;)if(!T(e[o=u[n]],t[o]))return!1;return!0}return e!=e&&t!=t}var I=new WeakMap,L=function(e){this.observers=new Map,this.obj=e},M=function(e,t){this.callback=e,this.observer=t};function C(e,t){t.unobserve()}function R(e,t){var n,r=function(e){return I.get(e)}(e);if(r){var o=function(e,t){return e.observers.get(t)}(r,t);n=o&&o.observer}else r=new L(e),I.set(e,r);if(n)return n;if(n={},r.value=c(e),t){n.callback=t,n.next=null;var a=function(){N(n)},i=function(){clearTimeout(n.next),n.next=setTimeout(a)};"undefined"!=typeof window&&(window.addEventListener("mouseup",i),window.addEventListener("keyup",i),window.addEventListener("mousedown",i),window.addEventListener("keydown",i),window.addEventListener("change",i))}return n.patches=[],n.object=e,n.unobserve=function(){N(n),clearTimeout(n.next),function(e,t){e.observers.delete(t.callback)}(r,n),"undefined"!=typeof window&&(window.removeEventListener("mouseup",i),window.removeEventListener("keyup",i),window.removeEventListener("mousedown",i),window.removeEventListener("keydown",i),window.removeEventListener("change",i))},r.observers.set(t,new M(t,n)),n}function N(e,t){void 0===t&&(t=!1);var n=I.get(e.object);U(n.value,e.object,e.patches,"",t),e.patches.length&&P(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function U(e,t,n,r,o){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var a=p(t),i=p(e),u=!1,_=i.length-1;_>=0;_--){var d=e[h=i[_]];if(!s(t,h)||void 0===t[h]&&void 0!==d&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(o&&n.push({op:"test",path:r+"/"+l(h),value:c(d)}),n.push({op:"remove",path:r+"/"+l(h)}),u=!0):(o&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}));else{var f=t[h];"object"==typeof d&&null!=d&&"object"==typeof f&&null!=f?U(d,f,n,r+"/"+l(h),o):d!==f&&(o&&n.push({op:"test",path:r+"/"+l(h),value:c(d)}),n.push({op:"replace",path:r+"/"+l(h),value:c(f)}))}}if(u||a.length!=i.length)for(_=0;_<a.length;_++){var h;s(e,h=a[_])||void 0===t[h]||n.push({op:"add",path:r+"/"+l(h),value:c(t[h])})}}}function k(e,t,n){void 0===n&&(n=!1);var r=[];return U(e,t,r,"",n),r}Object.assign({},r,o,{JsonPatchError:m,deepClone:c,escapePathComponent:l,unescapePathComponent:d})},619:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=function(e,t,n,o){var a;t[0]=0;for(var i=1;i<t.length;i++){var u=t[i++],s=t[i]?(t[0]|=u?1:2,n[t[i++]]):t[++i];3===u?o[0]=s:4===u?o[1]=Object.assign(o[1]||{},s):5===u?(o[1]=o[1]||{})[t[++i]]=s:6===u?o[1][t[++i]]+=s+"":u?(a=e.apply(s,r(e,s,n,["",null])),o.push(a),s[0]?t[0]|=2:(t[i-2]=0,t[i]=a)):o.push(s)}return o},o=new Map;function a(e){var t=o.get(this);return t||(t=new Map,o.set(this,t)),(t=r(this,t.get(e)||(t.set(e,t=function(e){for(var t,n,r=1,o="",a="",i=[0],u=function(e){1===r&&(e||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?i.push(0,e,o):3===r&&(e||o)?(i.push(3,e,o),r=2):2===r&&"..."===o&&e?i.push(4,e,0):2===r&&o&&!e?i.push(5,0,!0,o):r>=5&&((o||!e&&5===r)&&(i.push(r,0,o,n),r=6),e&&(i.push(r,e,0,n),r=6)),o=""},s=0;s<e.length;s++){s&&(1===r&&u(),u(s));for(var p=0;p<e[s].length;p++)t=e[s][p],1===r?"<"===t?(u(),i=[i],r=3):o+=t:4===r?"--"===o&&">"===t?(r=1,o=""):o=t+o[0]:a?t===a?a="":o+=t:'"'===t||"'"===t?a=t:">"===t?(u(),r=1):r&&("="===t?(r=5,n=o,o=""):"/"===t&&(r<5||">"===e[s][p+1])?(u(),3===r&&(i=i[0]),r=i,(i=i[0]).push(2,0,r),r=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(u(),r=2):o+=t),3===r&&"!--"===o&&(r=4,i=i[0])}return u(),i}(e)),t),arguments,[])).length>1?t:t[0]}},988:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const r={clipboard:e=>({clipboardData:e.clipboardData}),composition:e=>({data:e.data}),keyboard:e=>({altKey:e.altKey,charCode:e.charCode,ctrlKey:e.ctrlKey,key:e.key,keyCode:e.keyCode,locale:e.locale,location:e.location,metaKey:e.metaKey,repeat:e.repeat,shiftKey:e.shiftKey,which:e.which}),mouse:e=>({altKey:e.altKey,button:e.button,buttons:e.buttons,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY,shiftKey:e.shiftKey}),pointer:e=>({pointerId:e.pointerId,width:e.width,height:e.height,pressure:e.pressure,tiltX:e.tiltX,tiltY:e.tiltY,pointerType:e.pointerType,isPrimary:e.isPrimary}),touch:e=>({altKey:e.altKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey}),ui:e=>({detail:e.detail}),wheel:e=>({deltaMode:e.deltaMode,deltaX:e.deltaX,deltaY:e.deltaY,deltaZ:e.deltaZ}),animation:e=>({animationName:e.animationName,pseudoElement:e.pseudoElement,elapsedTime:e.elapsedTime}),transition:e=>({propertyName:e.propertyName,pseudoElement:e.pseudoElement,elapsedTime:e.elapsedTime})},o={clipboard:["copy","cut","paste"],composition:["compositionend","compositionstart","compositionupdate"],keyboard:["keydown","keypress","keyup"],mouse:["click","contextmenu","doubleclick","drag","dragend","dragenter","dragexit","dragleave","dragover","dragstart","drop","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup"],pointer:["pointerdown","pointermove","pointerup","pointercancel","gotpointercapture","lostpointercapture","pointerenter","pointerleave","pointerover","pointerout"],selection:["select"],touch:["touchcancel","touchend","touchmove","touchstart"],ui:["scroll"],wheel:["wheel"],animation:["animationstart","animationend","animationiteration"],transition:["transitionend"]},a={};Object.keys(o).forEach((e=>{o[e].forEach((t=>{a[t]=r[e]}))}));const i=function(e){const t={};return"value"in e.target&&(t.value=e.target.value),e.type in a&&Object.assign(t,a[e.type](e)),t}},955:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{mountLayout:()=>mountLayout,default:()=>Layout});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(271),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(456),react_dom__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__),htm__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(619),fast_json_patch__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(483),_event_to_object__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(988);const html=htm__WEBPACK_IMPORTED_MODULE_2__.Z.bind(react__WEBPACK_IMPORTED_MODULE_0__.createElement),LayoutConfigContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({});function mountLayout(e,t,n,r){react_dom__WEBPACK_IMPORTED_MODULE_1__.render(html`
      <${Layout}
        saveUpdateHook=${t}
        sendEvent=${n}
        importSourceUrl=${r}
      />
    `,e)}function Layout({saveUpdateHook:e,sendEvent:t,importSourceUrl:n}){const[r,o]=useInplaceJsonPatch({});return react__WEBPACK_IMPORTED_MODULE_0__.useEffect((()=>e(o)),[o]),r.tagName?html`
      <${LayoutConfigContext.Provider}
        value=${{sendEvent:t,importSourceUrl:n}}
      >
        <${Element} model=${r} />
      <//>
    `:html`<div />`}function Element({model:e}){return e.importSource?html`<${ImportedElement} model=${e} />`:html`<${StandardElement} model=${e} />`}function ImportedElement({model:e}){const t=react__WEBPACK_IMPORTED_MODULE_0__.useContext(LayoutConfigContext),n=useLazyModule(e.importSource.source,t.importSourceUrl);if(n){const r=getPathProperty(n,e.tagName),o=elementChildren(e),a=elementAttributes(e,t.sendEvent);return html`<${r} ...${a}>${o}<//>`}{const t=e.importSource.fallback;if(!t)return html`<div />`;switch(typeof t){case"object":return html`<${Element} model=${t} />`;case"string":return html`<div>${t}</div>`}}}function StandardElement({model:e}){const t=react__WEBPACK_IMPORTED_MODULE_0__.useContext(LayoutConfigContext),n=elementChildren(e),r=elementAttributes(e,t.sendEvent);return e.children&&e.children.length?html`<${e.tagName} ...${r}>${n}<//>`:html`<${e.tagName} ...${r} />`}function elementChildren(e){return e.children?e.children.map((e=>{switch(typeof e){case"object":return html`<${Element} model=${e} />`;case"string":return e}})):[]}function elementAttributes(e,t){const n=Object.assign({},e.attributes);return e.eventHandlers&&Object.keys(e.eventHandlers).forEach((r=>{const o=e.eventHandlers[r];n[r]=eventHandler(t,o)})),n}function eventHandler(e,t){return function(){const n=Array.from(arguments).map((e=>"object"==typeof e&&e.nativeEvent?(t.preventDefault&&e.preventDefault(),t.stopPropagation&&e.stopPropagation(),(0,_event_to_object__WEBPACK_IMPORTED_MODULE_4__.Z)(e)):e));new Promise(((r,o)=>{const a={data:n,target:t.target};e(a),r(a)}))}}function useLazyModule(source,sourceUrlBase=""){const[module,setModule]=react__WEBPACK_IMPORTED_MODULE_0__.useState(null);return module||eval(`import("${joinUrl(sourceUrlBase,source)}")`).then(setModule),module}function getPathProperty(e,t){const n=t.split(".");let r=e[n.shift()];for(let e=0;e<n.length;e++)r=r[n[e]];return r}function useInplaceJsonPatch(e){const t=react__WEBPACK_IMPORTED_MODULE_0__.useRef(e),n=useForceUpdate(),r=react__WEBPACK_IMPORTED_MODULE_0__.useCallback(((e,r)=>{applyPatchInplace(t.current,e,r),n()}),[t,n]);return[t.current,r]}function applyPatchInplace(e,t,n){t?fast_json_patch__WEBPACK_IMPORTED_MODULE_3__.af(e,[{op:"replace",path:t,value:fast_json_patch__WEBPACK_IMPORTED_MODULE_3__.af(fast_json_patch__WEBPACK_IMPORTED_MODULE_3__._p(e,t),n,!1,!1).newDocument}]):fast_json_patch__WEBPACK_IMPORTED_MODULE_3__.af(e,n)}function useForceUpdate(){const[,e]=react__WEBPACK_IMPORTED_MODULE_0__.useState();return react__WEBPACK_IMPORTED_MODULE_0__.useCallback((()=>e({})),[])}function joinUrl(e,t){return t.startsWith("./")?(e.endsWith("/")?e.slice(0,-1):e)+t.slice(1):t}}}]);